{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":34,"index":194}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var api = _interopDefault(_servicesApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('auth_token');\n        if (token) {\n          api.default.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n          const response = await api.default.get('/auth/me');\n          setUser(response.data);\n        }\n      } catch (error) {\n        await AsyncStorage.default.removeItem('auth_token');\n        delete api.default.defaults.headers.common['Authorization'];\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await api.default.post('/auth/login', {\n        email,\n        password\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      api.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      setUser(userData);\n    };\n    const loginWithGoogle = async idToken => {\n      const response = await api.default.post('/auth/google', {\n        id_token: idToken\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      api.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      setUser(userData);\n    };\n    const register = async data => {\n      const response = await api.default.post('/auth/register', data);\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      api.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      setUser(userData);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      delete api.default.defaults.headers.common['Authorization'];\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await api.default.get('/auth/me');\n        setUser(response.data);\n      } catch (error) {\n        await logout();\n      }\n    };\n    const isAdmin = () => {\n      return user?.role === 'admin';\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        loginWithGoogle,\n        register,\n        logout,\n        refreshUser,\n        isAdmin\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":131,"map":[[13,2,37,0,"Object"],[13,8,37,0],[13,9,37,0,"defineProperty"],[13,23,37,0],[13,24,37,0,"exports"],[13,31,37,0],[14,4,37,0,"enumerable"],[14,14,37,0],[15,4,37,0,"get"],[15,7,37,0],[15,18,37,0,"get"],[15,19,37,0],[16,6,37,0],[16,13,37,0,"AuthProvider"],[16,25,37,0],[17,4,37,0],[18,2,37,0],[19,2,114,0,"Object"],[19,8,114,0],[19,9,114,0,"defineProperty"],[19,23,114,0],[19,24,114,0,"exports"],[19,31,114,0],[20,4,114,0,"enumerable"],[20,14,114,0],[21,4,114,0,"get"],[21,7,114,0],[21,18,114,0,"get"],[21,19,114,0],[22,6,114,0],[22,13,114,0,"useAuth"],[22,20,114,0],[23,4,114,0],[24,2,114,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_servicesApi"],[28,18,3,0],[28,21,3,0,"require"],[28,28,3,0],[28,29,3,0,"_dependencyMap"],[28,43,3,0],[29,2,3,0],[29,6,3,0,"api"],[29,9,3,0],[29,12,3,0,"_interopDefault"],[29,27,3,0],[29,28,3,0,"_servicesApi"],[29,40,3,0],[30,2,3,34],[30,6,3,34,"_reactJsxDevRuntime"],[30,25,3,34],[30,28,3,34,"require"],[30,35,3,34],[30,36,3,34,"_dependencyMap"],[30,50,3,34],[31,2,35,0],[31,8,35,6,"AuthContext"],[31,19,35,17],[31,35,35,20],[31,39,35,20,"createContext"],[31,45,35,33],[31,46,35,33,"createContext"],[31,59,35,33],[31,61,35,63,"undefined"],[31,70,35,72],[31,71,35,73],[32,2,37,7],[32,8,37,13,"AuthProvider"],[32,20,37,60],[32,23,37,63,"AuthProvider"],[32,24,37,64],[33,4,37,66,"children"],[34,2,37,75],[34,3,37,76],[34,8,37,81],[35,4,38,2],[35,10,38,8],[35,11,38,9,"user"],[35,15,38,13],[35,17,38,15,"setUser"],[35,24,38,22],[35,25,38,23],[35,28,38,26],[35,32,38,26,"useState"],[35,38,38,34],[35,39,38,34,"useState"],[35,47,38,34],[35,49,38,48],[35,53,38,52],[35,54,38,53],[36,4,39,2],[36,10,39,8],[36,11,39,9,"loading"],[36,18,39,16],[36,20,39,18,"setLoading"],[36,30,39,28],[36,31,39,29],[36,34,39,32],[36,38,39,32,"useState"],[36,44,39,40],[36,45,39,40,"useState"],[36,53,39,40],[36,55,39,41],[36,59,39,45],[36,60,39,46],[37,4,41,2],[37,8,41,2,"useEffect"],[37,14,41,11],[37,15,41,11,"useEffect"],[37,24,41,11],[37,26,41,12],[37,32,41,18],[38,6,42,4,"checkAuth"],[38,15,42,13],[38,16,42,14],[38,17,42,15],[39,4,43,2],[39,5,43,3],[39,7,43,5],[39,9,43,7],[39,10,43,8],[40,4,45,2],[40,10,45,8,"checkAuth"],[40,19,45,17],[40,22,45,20],[40,28,45,20,"checkAuth"],[40,29,45,20],[40,34,45,32],[41,6,46,4],[41,10,46,8],[42,8,47,6],[42,14,47,12,"token"],[42,19,47,17],[42,22,47,20],[42,28,47,26,"AsyncStorage"],[42,40,47,38],[42,41,47,38,"default"],[42,48,47,38],[42,49,47,39,"getItem"],[42,56,47,46],[42,57,47,47],[42,69,47,59],[42,70,47,60],[43,8,48,6],[43,12,48,10,"token"],[43,17,48,15],[43,19,48,17],[44,10,49,8,"api"],[44,13,49,11],[44,14,49,11,"default"],[44,21,49,11],[44,22,49,12,"defaults"],[44,30,49,20],[44,31,49,21,"headers"],[44,38,49,28],[44,39,49,29,"common"],[44,45,49,35],[44,46,49,36],[44,61,49,51],[44,62,49,52],[44,65,49,55],[44,75,49,65,"token"],[44,80,49,70],[44,82,49,72],[45,10,50,8],[45,16,50,14,"response"],[45,24,50,22],[45,27,50,25],[45,33,50,31,"api"],[45,36,50,34],[45,37,50,34,"default"],[45,44,50,34],[45,45,50,35,"get"],[45,48,50,38],[45,49,50,39],[45,59,50,49],[45,60,50,50],[46,10,51,8,"setUser"],[46,17,51,15],[46,18,51,16,"response"],[46,26,51,24],[46,27,51,25,"data"],[46,31,51,29],[46,32,51,30],[47,8,52,6],[48,6,53,4],[48,7,53,5],[48,8,53,6],[48,15,53,13,"error"],[48,20,53,18],[48,22,53,20],[49,8,54,6],[49,14,54,12,"AsyncStorage"],[49,26,54,24],[49,27,54,24,"default"],[49,34,54,24],[49,35,54,25,"removeItem"],[49,45,54,35],[49,46,54,36],[49,58,54,48],[49,59,54,49],[50,8,55,6],[50,15,55,13,"api"],[50,18,55,16],[50,19,55,16,"default"],[50,26,55,16],[50,27,55,17,"defaults"],[50,35,55,25],[50,36,55,26,"headers"],[50,43,55,33],[50,44,55,34,"common"],[50,50,55,40],[50,51,55,41],[50,66,55,56],[50,67,55,57],[51,6,56,4],[51,7,56,5],[51,16,56,14],[52,8,57,6,"setLoading"],[52,18,57,16],[52,19,57,17],[52,24,57,22],[52,25,57,23],[53,6,58,4],[54,4,59,2],[54,5,59,3],[55,4,61,2],[55,10,61,8,"login"],[55,15,61,13],[55,18,61,16],[55,24,61,16,"login"],[55,25,61,23,"email"],[55,30,61,36],[55,32,61,38,"password"],[55,40,61,54],[55,45,61,59],[56,6,62,4],[56,12,62,10,"response"],[56,20,62,18],[56,23,62,21],[56,29,62,27,"api"],[56,32,62,30],[56,33,62,30,"default"],[56,40,62,30],[56,41,62,31,"post"],[56,45,62,35],[56,46,62,36],[56,59,62,49],[56,61,62,51],[57,8,62,53,"email"],[57,13,62,58],[58,8,62,60,"password"],[59,6,62,69],[59,7,62,70],[59,8,62,71],[60,6,63,4],[60,12,63,10],[61,8,63,12,"access_token"],[61,20,63,24],[62,8,63,26,"user"],[62,12,63,30],[62,14,63,32,"userData"],[63,6,63,41],[63,7,63,42],[63,10,63,45,"response"],[63,18,63,53],[63,19,63,54,"data"],[63,23,63,58],[64,6,65,4],[64,12,65,10,"AsyncStorage"],[64,24,65,22],[64,25,65,22,"default"],[64,32,65,22],[64,33,65,23,"setItem"],[64,40,65,30],[64,41,65,31],[64,53,65,43],[64,55,65,45,"access_token"],[64,67,65,57],[64,68,65,58],[65,6,66,4,"api"],[65,9,66,7],[65,10,66,7,"default"],[65,17,66,7],[65,18,66,8,"defaults"],[65,26,66,16],[65,27,66,17,"headers"],[65,34,66,24],[65,35,66,25,"common"],[65,41,66,31],[65,42,66,32],[65,57,66,47],[65,58,66,48],[65,61,66,51],[65,71,66,61,"access_token"],[65,83,66,73],[65,85,66,75],[66,6,67,4,"setUser"],[66,13,67,11],[66,14,67,12,"userData"],[66,22,67,20],[66,23,67,21],[67,4,68,2],[67,5,68,3],[68,4,70,2],[68,10,70,8,"loginWithGoogle"],[68,25,70,23],[68,28,70,26],[68,34,70,33,"idToken"],[68,41,70,48],[68,45,70,53],[69,6,71,4],[69,12,71,10,"response"],[69,20,71,18],[69,23,71,21],[69,29,71,27,"api"],[69,32,71,30],[69,33,71,30,"default"],[69,40,71,30],[69,41,71,31,"post"],[69,45,71,35],[69,46,71,36],[69,60,71,50],[69,62,71,52],[70,8,71,54,"id_token"],[70,16,71,62],[70,18,71,64,"idToken"],[71,6,71,72],[71,7,71,73],[71,8,71,74],[72,6,72,4],[72,12,72,10],[73,8,72,12,"access_token"],[73,20,72,24],[74,8,72,26,"user"],[74,12,72,30],[74,14,72,32,"userData"],[75,6,72,41],[75,7,72,42],[75,10,72,45,"response"],[75,18,72,53],[75,19,72,54,"data"],[75,23,72,58],[76,6,74,4],[76,12,74,10,"AsyncStorage"],[76,24,74,22],[76,25,74,22,"default"],[76,32,74,22],[76,33,74,23,"setItem"],[76,40,74,30],[76,41,74,31],[76,53,74,43],[76,55,74,45,"access_token"],[76,67,74,57],[76,68,74,58],[77,6,75,4,"api"],[77,9,75,7],[77,10,75,7,"default"],[77,17,75,7],[77,18,75,8,"defaults"],[77,26,75,16],[77,27,75,17,"headers"],[77,34,75,24],[77,35,75,25,"common"],[77,41,75,31],[77,42,75,32],[77,57,75,47],[77,58,75,48],[77,61,75,51],[77,71,75,61,"access_token"],[77,83,75,73],[77,85,75,75],[78,6,76,4,"setUser"],[78,13,76,11],[78,14,76,12,"userData"],[78,22,76,20],[78,23,76,21],[79,4,77,2],[79,5,77,3],[80,4,79,2],[80,10,79,8,"register"],[80,18,79,16],[80,21,79,19],[80,27,79,26,"data"],[80,31,79,44],[80,35,79,49],[81,6,80,4],[81,12,80,10,"response"],[81,20,80,18],[81,23,80,21],[81,29,80,27,"api"],[81,32,80,30],[81,33,80,30,"default"],[81,40,80,30],[81,41,80,31,"post"],[81,45,80,35],[81,46,80,36],[81,62,80,52],[81,64,80,54,"data"],[81,68,80,58],[81,69,80,59],[82,6,81,4],[82,12,81,10],[83,8,81,12,"access_token"],[83,20,81,24],[84,8,81,26,"user"],[84,12,81,30],[84,14,81,32,"userData"],[85,6,81,41],[85,7,81,42],[85,10,81,45,"response"],[85,18,81,53],[85,19,81,54,"data"],[85,23,81,58],[86,6,83,4],[86,12,83,10,"AsyncStorage"],[86,24,83,22],[86,25,83,22,"default"],[86,32,83,22],[86,33,83,23,"setItem"],[86,40,83,30],[86,41,83,31],[86,53,83,43],[86,55,83,45,"access_token"],[86,67,83,57],[86,68,83,58],[87,6,84,4,"api"],[87,9,84,7],[87,10,84,7,"default"],[87,17,84,7],[87,18,84,8,"defaults"],[87,26,84,16],[87,27,84,17,"headers"],[87,34,84,24],[87,35,84,25,"common"],[87,41,84,31],[87,42,84,32],[87,57,84,47],[87,58,84,48],[87,61,84,51],[87,71,84,61,"access_token"],[87,83,84,73],[87,85,84,75],[88,6,85,4,"setUser"],[88,13,85,11],[88,14,85,12,"userData"],[88,22,85,20],[88,23,85,21],[89,4,86,2],[89,5,86,3],[90,4,88,2],[90,10,88,8,"logout"],[90,16,88,14],[90,19,88,17],[90,25,88,17,"logout"],[90,26,88,17],[90,31,88,29],[91,6,89,4],[91,12,89,10,"AsyncStorage"],[91,24,89,22],[91,25,89,22,"default"],[91,32,89,22],[91,33,89,23,"removeItem"],[91,43,89,33],[91,44,89,34],[91,56,89,46],[91,57,89,47],[92,6,90,4],[92,13,90,11,"api"],[92,16,90,14],[92,17,90,14,"default"],[92,24,90,14],[92,25,90,15,"defaults"],[92,33,90,23],[92,34,90,24,"headers"],[92,41,90,31],[92,42,90,32,"common"],[92,48,90,38],[92,49,90,39],[92,64,90,54],[92,65,90,55],[93,6,91,4,"setUser"],[93,13,91,11],[93,14,91,12],[93,18,91,16],[93,19,91,17],[94,4,92,2],[94,5,92,3],[95,4,94,2],[95,10,94,8,"refreshUser"],[95,21,94,19],[95,24,94,22],[95,30,94,22,"refreshUser"],[95,31,94,22],[95,36,94,34],[96,6,95,4],[96,10,95,8],[97,8,96,6],[97,14,96,12,"response"],[97,22,96,20],[97,25,96,23],[97,31,96,29,"api"],[97,34,96,32],[97,35,96,32,"default"],[97,42,96,32],[97,43,96,33,"get"],[97,46,96,36],[97,47,96,37],[97,57,96,47],[97,58,96,48],[98,8,97,6,"setUser"],[98,15,97,13],[98,16,97,14,"response"],[98,24,97,22],[98,25,97,23,"data"],[98,29,97,27],[98,30,97,28],[99,6,98,4],[99,7,98,5],[99,8,98,6],[99,15,98,13,"error"],[99,20,98,18],[99,22,98,20],[100,8,99,6],[100,14,99,12,"logout"],[100,20,99,18],[100,21,99,19],[100,22,99,20],[101,6,100,4],[102,4,101,2],[102,5,101,3],[103,4,103,2],[103,10,103,8,"isAdmin"],[103,17,103,15],[103,20,103,18,"isAdmin"],[103,21,103,18],[103,26,103,24],[104,6,104,4],[104,13,104,11,"user"],[104,17,104,15],[104,19,104,17,"role"],[104,23,104,21],[104,28,104,26],[104,35,104,33],[105,4,105,2],[105,5,105,3],[106,4,107,2],[106,24,108,4],[106,28,108,4,"_reactJsxDevRuntime"],[106,47,108,4],[106,48,108,4,"jsxDEV"],[106,54,108,4],[106,56,108,5,"AuthContext"],[106,67,108,16],[106,68,108,17,"Provider"],[106,76,108,25],[107,6,108,26,"value"],[107,11,108,31],[107,13,108,33],[108,8,108,35,"user"],[108,12,108,39],[109,8,108,41,"loading"],[109,15,108,48],[110,8,108,50,"login"],[110,13,108,55],[111,8,108,57,"loginWithGoogle"],[111,23,108,72],[112,8,108,74,"register"],[112,16,108,82],[113,8,108,84,"logout"],[113,14,108,90],[114,8,108,92,"refreshUser"],[114,19,108,103],[115,8,108,105,"isAdmin"],[116,6,108,113],[116,7,108,115],[117,6,108,115,"children"],[117,14,108,115],[117,16,109,7,"children"],[118,4,109,15],[119,6,109,15,"fileName"],[119,14,109,15],[119,16,109,15,"_jsxFileName"],[119,28,109,15],[120,6,109,15,"lineNumber"],[120,16,109,15],[121,6,109,15,"columnNumber"],[121,18,109,15],[122,4,109,15],[122,11,110,26],[122,12,110,27],[123,2,112,0],[123,3,112,1],[124,2,114,7],[124,8,114,13,"useAuth"],[124,15,114,20],[124,18,114,23,"useAuth"],[124,19,114,23],[124,24,114,29],[125,4,115,2],[125,10,115,8,"context"],[125,17,115,15],[125,20,115,18],[125,24,115,18,"useContext"],[125,30,115,28],[125,31,115,28,"useContext"],[125,41,115,28],[125,43,115,29,"AuthContext"],[125,54,115,40],[125,55,115,41],[126,4,116,2],[126,8,116,6,"context"],[126,15,116,13],[126,20,116,18,"undefined"],[126,29,116,27],[126,31,116,29],[127,6,117,4],[127,12,117,10],[127,16,117,14,"Error"],[127,21,117,19],[127,22,117,20],[127,67,117,65],[127,68,117,66],[128,4,118,2],[129,4,119,2],[129,11,119,9,"context"],[129,18,119,16],[130,2,120,0],[130,3,120,1],[131,0,120,2],[131,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","loginWithGoogle","register","logout","refreshUser","isAdmin","useAuth"],"mappings":"AAA;+DCoC;YCI;GDE;oBEE;GFc;gBGE;GHO;0BIE;GJO;mBKE;GLO;iBME;GNI;sBOE;GPO;kBQE;GRE;CDO;uBUE;CVM"},"hasCjsExports":false},"type":"js/module"}]}