{"dependencies":[{"name":"@babel/runtime/helpers/objectSpread2","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"SfRhzMj3Ex6qA89WTFEUm9Lj49A=","exportNames":["*"],"imports":1}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":301},"end":{"line":12,"column":43,"index":344}}],"key":"bGUa+dDG2WEhPiIlobT3urS95UE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return u}});var t=e(r(d[0],\"@babel/runtime/helpers/objectSpread2\")),s=e(r(d[1],\"fbjs/lib/invariant\"));var u=class{constructor(e){var t=e.onMoreTasks;this._onMoreTasks=t,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(e=>this.enqueue(e))}cancelTasks(e){this._queueStack=this._queueStack.map(s=>(0,t.default)((0,t.default)({},s),{},{tasks:s.tasks.filter(t=>-1===e.indexOf(t))})).filter((e,t)=>e.tasks.length>0||0===t)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{'object'==typeof t&&t.gen?this._genPromise(t):'object'==typeof t&&t.run?t.run():((0,s.default)('function'==typeof t,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(t,null,2)),t())}catch(e){throw e.message='TaskQueue: Error with task '+(t.name||'')+': '+e.message,e}}}_getCurrentQueue(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}_genPromise(e){var t=this._queueStack.push({tasks:[],popable:!1})-1,s=this._queueStack[t];e.gen().then(()=>{s.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(t=>{setTimeout(()=>{throw t.message=\"TaskQueue: Error resolving Promise in task \"+e.name+\": \"+t.message,t},0)})}}});","lineCount":1,"map":[[1,143,87,0,"Object"],[1,150,87,0,"defineProperty"],[1,165,87,0,"_e"],[1,168,87,0],[1,179,87,0,"enumerable"],[1,191,87,0],[1,193,87,0,"get"],[1,197,87,0],[1,215,87,0,"_default"],[1,216,87,0],[1,220,1,0],[1,224,1,0,"_objectSpread"],[1,226,1,0,"_interopDefault"],[1,228,1,0,"r"],[1,230,1,0,"d"],[1,232,1,0],[1,276,12,0,"invariant"],[1,278,12,0,"_interopDefault"],[1,280,12,0,"r"],[1,282,12,0,"d"],[1,284,12,0],[1,310,87,0],[1,314,87,0,"_default"],[1,316,13,0],[1,322,14,2,"constructor"],[1,334,14,14,"_ref"],[1,337,15,4],[1,341,15,8,"onMoreTasks"],[1,343,15,22,"_ref"],[1,345,15,27,"onMoreTasks"],[1,357,16,4,"this"],[1,362,16,9,"_onMoreTasks"],[1,375,16,24,"onMoreTasks"],[1,377,17,4,"this"],[1,382,17,9,"_queueStack"],[1,394,17,23],[1,395,17,24],[1,396,18,6,"tasks"],[1,402,18,13],[1,405,19,6,"popable"],[1,414,19,15],[1,417,21,2],[1,418,22,2,"enqueue"],[1,426,22,10,"task"],[1,429,23,4,"this"],[1,434,23,9,"_getCurrentQueue"],[1,453,23,28,"push"],[1,458,23,33,"task"],[1,460,24,2],[1,461,25,2,"enqueueTasks"],[1,474,25,15,"tasks"],[1,477,26,4,"tasks"],[1,479,26,10,"forEach"],[1,487,26,18,"task"],[1,490,26,26,"this"],[1,495,26,31,"enqueue"],[1,503,26,39,"task"],[1,506,27,2],[1,507,28,2,"cancelTasks"],[1,519,28,14,"tasksToCancel"],[1,522,29,4,"this"],[1,527,29,9,"_queueStack"],[1,539,29,23,"this"],[1,544,29,28,"_queueStack"],[1,556,29,40,"map"],[1,560,29,44,"queue"],[1,564,29,53],[1,566,29,53,"_objectSpread"],[1,568,29,66,"default"],[1,578,29,67],[1,580,29,67,"_objectSpread"],[1,582,29,80,"default"],[1,591,29,81],[1,592,29,82],[1,594,29,85,"queue"],[1,597,29,93],[1,598,29,94],[1,600,29,97],[1,601,30,6,"tasks"],[1,607,30,13,"queue"],[1,609,30,19,"tasks"],[1,615,30,25,"filter"],[1,622,30,32,"task"],[1,626,30,73],[1,630,30,40,"tasksToCancel"],[1,632,30,54,"indexOf"],[1,640,30,62,"task"],[1,647,31,8,"filter"],[1,654,31,15],[1,655,31,16,"queue"],[1,657,31,23,"idx"],[1,661,31,31,"queue"],[1,663,31,37,"tasks"],[1,669,31,43,"length"],[1,676,31,52],[1,679,31,65],[1,683,31,57,"idx"],[1,685,32,2],[1,686,33,2,"hasTasksToProcess"],[1,706,34,4],[1,713,34,11,"this"],[1,718,34,16,"_getCurrentQueue"],[1,737,34,35,"length"],[1,744,34,44],[1,745,35,2],[1,746,40,2,"processNext"],[1,760,41,4],[1,764,41,8,"queue"],[1,766,41,16,"this"],[1,771,41,21,"_getCurrentQueue"],[1,790,42,4],[1,793,42,8,"queue"],[1,795,42,14,"length"],[1,802,42,22],[1,803,43,6],[1,807,43,10,"task"],[1,809,43,17,"queue"],[1,811,43,23,"shift"],[1,819,44,6],[1,823,45,28],[1,840,45,19,"task"],[1,843,45,40,"task"],[1,845,45,45,"gen"],[1,849,46,10,"this"],[1,854,46,15,"_genPromise"],[1,866,46,27,"task"],[1,869,47,35],[1,886,47,26,"task"],[1,889,47,47,"task"],[1,891,47,52,"run"],[1,895,48,10,"task"],[1,897,48,15,"run"],[1,905,50,10],[1,907,50,10,"invariant"],[1,909,50,19,"default"],[1,918,50,36],[1,937,50,27,"task"],[1,939,50,48],[1,999,50,110,"JSON"],[1,1004,50,115,"stringify"],[1,1014,50,125,"task"],[1,1016,50,131],[1,1021,50,137],[1,1025,51,10,"task"],[1,1029,53,6],[1,1030,53,8],[1,1036,53,15,"e"],[1,1039,55,8],[1,1045,54,8,"e"],[1,1047,54,10,"message"],[1,1055,54,20],[1,1086,54,53,"task"],[1,1088,54,58,"name"],[1,1094,54,66],[1,1098,54,72],[1,1103,54,79,"e"],[1,1105,54,81,"message"],[1,1113,55,14,"e"],[1,1114,56,6],[1,1115,57,4],[1,1116,58,2],[1,1117,59,2,"_getCurrentQueue"],[1,1136,60,4],[1,1140,60,8,"stackIdx"],[1,1142,60,19,"this"],[1,1147,60,24,"_queueStack"],[1,1159,60,36,"length"],[1,1166,60,45],[1,1168,61,8,"queue"],[1,1170,61,16,"this"],[1,1175,61,21,"_queueStack"],[1,1187,61,33,"stackIdx"],[1,1190,62,4],[1,1197,62,8,"queue"],[1,1199,62,14,"popable"],[1,1208,62,48],[1,1212,62,25,"queue"],[1,1214,62,31,"tasks"],[1,1220,62,37,"length"],[1,1228,62,53,"stackIdx"],[1,1230,62,64],[1,1233,63,6,"this"],[1,1238,63,11,"_queueStack"],[1,1250,63,23,"pop"],[1,1256,64,13,"this"],[1,1261,64,18,"_getCurrentQueue"],[1,1281,66,13,"queue"],[1,1283,66,19,"tasks"],[1,1288,68,2],[1,1289,69,2,"_genPromise"],[1,1301,69,14,"task"],[1,1304,70,4],[1,1308,74,8,"stackIdx"],[1,1310,70,17,"this"],[1,1315,70,22,"_queueStack"],[1,1327,70,34,"push"],[1,1332,70,39],[1,1333,71,6,"tasks"],[1,1339,71,13],[1,1342,72,6,"popable"],[1,1351,72,15],[1,1355,74,28],[1,1357,75,8,"stackItem"],[1,1359,75,20,"this"],[1,1364,75,25,"_queueStack"],[1,1376,75,37,"stackIdx"],[1,1379,76,4,"task"],[1,1381,76,9,"gen"],[1,1387,76,15,"then"],[1,1392,76,20],[1,1397,77,6,"stackItem"],[1,1399,77,16,"popable"],[1,1408,77,26],[1,1410,78,6,"this"],[1,1415,78,11,"hasTasksToProcess"],[1,1436,78,34,"this"],[1,1441,78,39,"_onMoreTasks"],[1,1458,79,7,"catch"],[1,1464,79,13,"ex"],[1,1468,80,6,"setTimeout"],[1,1479,80,17],[1,1484,82,8],[1,1490,81,8,"ex"],[1,1492,81,11,"message"],[1,1500,81,21],[1,1546,81,69,"task"],[1,1548,81,74,"name"],[1,1553,81,81],[1,1558,81,88,"ex"],[1,1560,81,91,"message"],[1,1568,82,14,"ex"],[1,1571,83,9],[1,1575,85,2],[1,1577,87,25],[1,1580]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;ACY;ECC;GDO;EEC;GFE;EGC;kBCC,0BD;GHC;EKC;4CCC;gCCC,0CD;MDC,SG,mDH;GLC;ESC;GTE;EUK;GVkB;EWC;GXS;EYC;oBCO;KDG,QE;iBCC;ODG;KFC;GZC;CDC"},"hasCjsExports":false},"type":"js/module"}]}