{"dependencies":[{"name":"../addEventListener","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":181},"end":{"line":10,"column":55,"index":236}}],"key":"4xvCwHsxCKw+bkXrhCHsTztm4zw=","exportNames":["*"],"imports":1}},{"name":"../canUseDom","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":237},"end":{"line":11,"column":37,"index":274}}],"key":"NAgv5vx4h/J1uxoLSWxqZG/Z81Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),_e.getActiveModality=function(){return s},_e.getModality=function(){return l},_e.addModalityListener=function(e){return y.add(e),()=>{y.delete(e)}},_e.testOnly_resetActiveModality=function(){v=!1,s=f,l=f};var e,t,n,o=r(d[0],\"../addEventListener\"),u=r(d[1],\"../canUseDom\"),c=(e=u)&&e.__esModule?e:{default:e},s='keyboard',l='keyboard',v=!1,y=new Set,f='keyboard',p='mouse',E='touch',L='contextmenu',w='mousedown',h='mousemove',b='mouseup',M='pointerdown',_='pointermove',T='scroll',k='selectionchange',K='touchcancel',A='touchmove',O='touchstart',P={passive:!0},S={capture:!0,passive:!0};function j(){null==t&&null==n||(null!=t&&(l=t,t=null),null!=n&&(s=n,n=null),D())}function x(e){var t=e.type;if('undefined'!=typeof window&&null!=window.PointerEvent){if(t===M)return void(s!==e.pointerType&&(l=e.pointerType,s=e.pointerType,D()));if(t===_)return void(l!==e.pointerType&&(l=e.pointerType,D()))}else{if(v||(t===w&&s!==p&&(l=p,s=p,D()),t===h&&l!==p&&(l=p,D())),t===O)return v=!0,e.touches&&e.touches.length>1&&(v=!1),void(s!==E&&(l=E,s=E,D()));t!==L&&t!==b&&t!==k&&t!==T&&t!==K&&t!==A||(v=!1)}}function D(){var e={activeModality:s,modality:l};y.forEach(t=>{t(e)})}c.default&&((0,o.addEventListener)(window,'blur',function(){t=l,n=s,s=f,l=f,D(),v=!1},P),(0,o.addEventListener)(window,'focus',function(){j()},P),(0,o.addEventListener)(document,'keydown',function(e){e.metaKey||e.altKey||e.ctrlKey||l!==f&&(l=f,s=f,D())},S),(0,o.addEventListener)(document,'visibilitychange',function(){'hidden'!==document.visibilityState&&j()},S),(0,o.addEventListener)(document,M,x,S),(0,o.addEventListener)(document,_,x,S),(0,o.addEventListener)(document,L,x,S),(0,o.addEventListener)(document,w,x,S),(0,o.addEventListener)(document,h,x,S),(0,o.addEventListener)(document,b,x,S),(0,o.addEventListener)(document,K,x,S),(0,o.addEventListener)(document,A,x,S),(0,o.addEventListener)(document,O,x,S),(0,o.addEventListener)(document,k,x,S),(0,o.addEventListener)(document,T,x,S))});","lineCount":1,"map":[[1,92,172,0,"_e"],[1,95,172,0,"getActiveModality"],[1,113,172,7],[1,124,173,2],[1,131,173,9,"activeModality"],[1,132,174,0],[1,134,175,0,"_e"],[1,137,175,0,"getModality"],[1,149,175,7],[1,160,176,2],[1,167,176,9,"modality"],[1,168,177,0],[1,170,178,0,"_e"],[1,173,178,0,"addModalityListener"],[1,193,178,7],[1,202,178,36,"listener"],[1,205,180,2],[1,212,179,2,"listeners"],[1,214,179,12,"add"],[1,218,179,16,"listener"],[1,221,180,9],[1,226,181,4,"listeners"],[1,228,181,14,"delete"],[1,235,181,21,"listener"],[1,238,183,0],[1,240,184,0,"_e"],[1,243,184,0,"testOnly_resetActiveModality"],[1,272,184,7],[1,283,185,2,"isEmulatingMouseEvents"],[1,286,185,27],[1,288,186,2,"activeModality"],[1,290,186,19,"KEYBOARD"],[1,292,187,2,"modality"],[1,294,187,13,"KEYBOARD"],[1,295,188,0],[1,297,10,0],[1,301],[1,303,15,4,"previousModality"],[1,305,16,4,"previousActiveModality"],[1,307,10,0,"_addEventListener"],[1,309,10,0,"r"],[1,311,10,0,"d"],[1,313,10,0],[1,339,11,0,"_canUseDom"],[1,341,11,0,"r"],[1,343,11,0,"d"],[1,345,11,0],[1,364,11,0,"canUseDOM"],[1,367],[1,369,11,0,"_canUseDom"],[1,373],[1,400,13,4,"activeModality"],[1,402,13,21],[1,413,14,4,"modality"],[1,415,14,15],[1,426,17,4,"isEmulatingMouseEvents"],[1,429,17,29],[1,431,18,4,"listeners"],[1,433,18,16],[1,437,18,20,"Set"],[1,441,19,4,"KEYBOARD"],[1,443,19,15],[1,454,20,4,"MOUSE"],[1,456,20,12],[1,464,21,4,"TOUCH"],[1,466,21,12],[1,474,23,4,"CONTEXTMENU"],[1,476,23,18],[1,490,26,4,"MOUSEDOWN"],[1,492,26,16],[1,504,27,4,"MOUSEMOVE"],[1,506,27,16],[1,518,28,4,"MOUSEUP"],[1,520,28,14],[1,530,29,4,"POINTERDOWN"],[1,532,29,18],[1,546,30,4,"POINTERMOVE"],[1,548,30,18],[1,562,31,4,"SCROLL"],[1,564,31,13],[1,573,32,4,"SELECTIONCHANGE"],[1,575,32,22],[1,593,33,4,"TOUCHCANCEL"],[1,595,33,18],[1,609,34,4,"TOUCHMOVE"],[1,611,34,16],[1,623,35,4,"TOUCHSTART"],[1,625,35,17],[1,638,37,4,"bubbleOptions"],[1,640,37,20],[1,641,38,2,"passive"],[1,650,38,11],[1,653,40,4,"captureOptions"],[1,655,40,21],[1,656,41,2,"capture"],[1,665,41,11],[1,667,42,2,"passive"],[1,676,42,11],[1,679,44,0],[1,688,44,9,"restoreModality"],[1,692,45,26],[1,698,45,6,"previousModality"],[1,701,45,60],[1,707,45,34,"previousActiveModality"],[1,711,46,28],[1,717,46,8,"previousModality"],[1,721,47,6,"modality"],[1,723,47,17,"previousModality"],[1,725,48,6,"previousModality"],[1,727,48,25],[1,733,50,34],[1,739,50,8,"previousActiveModality"],[1,743,51,6,"activeModality"],[1,745,51,23,"previousActiveModality"],[1,747,52,6,"previousActiveModality"],[1,749,52,31],[1,755,54,4,"callListeners"],[1,759,56,0],[1,760,84,0],[1,769,84,9,"onPointerish"],[1,771,84,22,"event"],[1,774,85,2],[1,778,85,6,"eventType"],[1,780,85,18,"event"],[1,782,85,24,"type"],[1,787,86,2],[1,790,12,54],[1,810,12,43,"window"],[1,818,12,92],[1,824,12,69,"window"],[1,831,12,76,"PointerEvent"],[1,844,86,30],[1,845,87,4],[1,848,87,8,"eventType"],[1,852,87,22,"POINTERDOWN"],[1,854,93,6],[1,866,88,10,"activeModality"],[1,870,88,29,"event"],[1,872,88,35,"pointerType"],[1,886,89,8,"modality"],[1,888,89,19,"event"],[1,890,89,25,"pointerType"],[1,902,90,8,"activeModality"],[1,904,90,25,"event"],[1,906,90,31,"pointerType"],[1,918,91,8,"callListeners"],[1,924,95,4],[1,927,95,8,"eventType"],[1,931,95,22,"POINTERMOVE"],[1,933,100,6],[1,945,96,10,"modality"],[1,949,96,23,"event"],[1,951,96,29,"pointerType"],[1,965,97,8,"modality"],[1,967,97,19,"event"],[1,969,97,25,"pointerType"],[1,981,98,8,"callListeners"],[1,986,102,2],[1,991,104,7],[1,992,122,4],[1,995,105,9,"isEmulatingMouseEvents"],[1,999,106,10,"eventType"],[1,1003,106,24,"MOUSEDOWN"],[1,1006,107,12,"activeModality"],[1,1010,107,31,"MOUSE"],[1,1014,108,10,"modality"],[1,1016,108,21,"MOUSE"],[1,1018,109,10,"activeModality"],[1,1020,109,27,"MOUSE"],[1,1022,110,10,"callListeners"],[1,1027,113,10,"eventType"],[1,1031,113,24,"MOUSEMOVE"],[1,1034,114,12,"modality"],[1,1038,114,25,"MOUSE"],[1,1042,115,10,"modality"],[1,1044,115,21,"MOUSE"],[1,1046,116,10,"callListeners"],[1,1052,122,8,"eventType"],[1,1056,122,22,"TOUCHSTART"],[1,1058,132,6],[1,1065,123,6,"isEmulatingMouseEvents"],[1,1068,123,31],[1,1070,124,10,"event"],[1,1072,124,16,"touches"],[1,1081,124,27,"event"],[1,1083,124,33,"touches"],[1,1091,124,41,"length"],[1,1098,124,50],[1,1102,125,8,"isEmulatingMouseEvents"],[1,1105,125,33],[1,1113,127,10,"activeModality"],[1,1117,127,29,"TOUCH"],[1,1121,128,8,"modality"],[1,1123,128,19,"TOUCH"],[1,1125,129,8,"activeModality"],[1,1127,129,25,"TOUCH"],[1,1129,130,8,"callListeners"],[1,1135,137,8,"eventType"],[1,1139,137,22,"CONTEXTMENU"],[1,1142,137,37,"eventType"],[1,1146,137,51,"MOUSEUP"],[1,1149,137,62,"eventType"],[1,1153,137,76,"SELECTIONCHANGE"],[1,1156,137,95,"eventType"],[1,1160,137,109,"SCROLL"],[1,1163,137,119,"eventType"],[1,1167,137,133,"TOUCHCANCEL"],[1,1170,137,148,"eventType"],[1,1174,137,162,"TOUCHMOVE"],[1,1178,138,6,"isEmulatingMouseEvents"],[1,1181,138,31],[1,1183,140,2],[1,1184,141,0],[1,1185,163,0],[1,1194,163,9,"callListeners"],[1,1198,164,2],[1,1202,164,6,"value"],[1,1204,164,14],[1,1205,165,4,"activeModality"],[1,1222,166,4,"modality"],[1,1234,168,2,"listeners"],[1,1236,168,12,"forEach"],[1,1244,168,20,"listener"],[1,1248,169,4,"listener"],[1,1250,169,13,"value"],[1,1254,171,0],[1,1255,142,4,"canUseDOM"],[1,1257,142,13,"default"],[1,1268,144,2],[1,1270,144,2,"addEventListener"],[1,1272,144,18,"addEventListener"],[1,1290,144,19,"window"],[1,1297,22,11],[1,1304,57,0],[1,1315,58,2,"previousModality"],[1,1317,58,21,"modality"],[1,1319,59,2,"previousActiveModality"],[1,1321,59,27,"activeModality"],[1,1323,60,2,"activeModality"],[1,1325,60,19,"KEYBOARD"],[1,1327,61,2,"modality"],[1,1329,61,13,"KEYBOARD"],[1,1331,62,2,"callListeners"],[1,1335,64,2,"isEmulatingMouseEvents"],[1,1338,64,27],[1,1339,65,0],[1,1341,144,47,"bubbleOptions"],[1,1345,145,2],[1,1347,145,2,"addEventListener"],[1,1349,145,18,"addEventListener"],[1,1367,145,19,"window"],[1,1374,24,12],[1,1382,66,0],[1,1393,67,2,"restoreModality"],[1,1396,68,0],[1,1398,145,49,"bubbleOptions"],[1,1402,148,2],[1,1404,148,2,"addEventListener"],[1,1406,148,18,"addEventListener"],[1,1424,148,19,"document"],[1,1433,25,14],[1,1443,69,0],[1,1452,69,19,"event"],[1,1455,70,6,"event"],[1,1457,70,12,"metaKey"],[1,1466,70,23,"event"],[1,1468,70,29,"altKey"],[1,1476,70,39,"event"],[1,1478,70,45,"ctrlKey"],[1,1487,73,6,"modality"],[1,1491,73,19,"KEYBOARD"],[1,1495,74,4,"modality"],[1,1497,74,15,"KEYBOARD"],[1,1499,75,4,"activeModality"],[1,1501,75,21,"KEYBOARD"],[1,1503,76,4,"callListeners"],[1,1507,78,0],[1,1509,148,49,"captureOptions"],[1,1513,149,2],[1,1515,149,2,"addEventListener"],[1,1517,149,18,"addEventListener"],[1,1535,149,19,"document"],[1,1544,36,23],[1,1563,79,0],[1,1574,80,35],[1,1585,80,6,"document"],[1,1594,80,15,"visibilityState"],[1,1611,81,4,"restoreModality"],[1,1614,83,0],[1,1616,149,67,"captureOptions"],[1,1620,150,2],[1,1622,150,2,"addEventListener"],[1,1624,150,18,"addEventListener"],[1,1642,150,19,"document"],[1,1651,150,29,"POINTERDOWN"],[1,1653,150,42,"onPointerish"],[1,1655,150,56,"captureOptions"],[1,1659,151,2],[1,1661,151,2,"addEventListener"],[1,1663,151,18,"addEventListener"],[1,1681,151,19,"document"],[1,1690,151,29,"POINTERMOVE"],[1,1692,151,42,"onPointerish"],[1,1694,151,56,"captureOptions"],[1,1698,153,2],[1,1700,153,2,"addEventListener"],[1,1702,153,18,"addEventListener"],[1,1720,153,19,"document"],[1,1729,153,29,"CONTEXTMENU"],[1,1731,153,42,"onPointerish"],[1,1733,153,56,"captureOptions"],[1,1737,154,2],[1,1739,154,2,"addEventListener"],[1,1741,154,18,"addEventListener"],[1,1759,154,19,"document"],[1,1768,154,29,"MOUSEDOWN"],[1,1770,154,40,"onPointerish"],[1,1772,154,54,"captureOptions"],[1,1776,155,2],[1,1778,155,2,"addEventListener"],[1,1780,155,18,"addEventListener"],[1,1798,155,19,"document"],[1,1807,155,29,"MOUSEMOVE"],[1,1809,155,40,"onPointerish"],[1,1811,155,54,"captureOptions"],[1,1815,156,2],[1,1817,156,2,"addEventListener"],[1,1819,156,18,"addEventListener"],[1,1837,156,19,"document"],[1,1846,156,29,"MOUSEUP"],[1,1848,156,38,"onPointerish"],[1,1850,156,52,"captureOptions"],[1,1854,157,2],[1,1856,157,2,"addEventListener"],[1,1858,157,18,"addEventListener"],[1,1876,157,19,"document"],[1,1885,157,29,"TOUCHCANCEL"],[1,1887,157,42,"onPointerish"],[1,1889,157,56,"captureOptions"],[1,1893,158,2],[1,1895,158,2,"addEventListener"],[1,1897,158,18,"addEventListener"],[1,1915,158,19,"document"],[1,1924,158,29,"TOUCHMOVE"],[1,1926,158,40,"onPointerish"],[1,1928,158,54,"captureOptions"],[1,1932,159,2],[1,1934,159,2,"addEventListener"],[1,1936,159,18,"addEventListener"],[1,1954,159,19,"document"],[1,1963,159,29,"TOUCHSTART"],[1,1965,159,41,"onPointerish"],[1,1967,159,55,"captureOptions"],[1,1971,160,2],[1,1973,160,2,"addEventListener"],[1,1975,160,18,"addEventListener"],[1,1993,160,19,"document"],[1,2002,160,29,"SELECTIONCHANGE"],[1,2004,160,46,"onPointerish"],[1,2006,160,60,"captureOptions"],[1,2010,161,2],[1,2012,161,2,"addEventListener"],[1,2014,161,18,"addEventListener"],[1,2032,161,19,"document"],[1,2041,161,29,"SCROLL"],[1,2043,161,37,"onPointerish"],[1,2045,161,51,"captureOptions"],[1,2048,188,1],[1,2051]],"functionMap":{"names":["<global>","supportsPointerEvent","restoreModality","onBlurWindow","onFocusWindow","onKeyDown","onVisibilityChange","onPointerish","callListeners","listeners.forEach$argument_0","getActiveModality","getModality","addModalityListener","<anonymous>","testOnly_resetActiveModality"],"mappings":"AAA;2BCW,sED;AEgC;CFY;AGC;CHQ;AIC;CJE;AKC;CLS;AMC;CNI;AOC;CPyD;AQsB;oBCK;GDE;CRC;OUC;CVE;OWC;CXE;OYC;SCE;GDE;CZC;OcC"},"hasCjsExports":false},"type":"js/module"}]}