{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":34,"index":194}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var api = _interopDefault(_servicesApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('auth_token');\n        if (token) {\n          api.default.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n          const response = await api.default.get('/auth/me');\n          setUser(response.data);\n        }\n      } catch (error) {\n        await AsyncStorage.default.removeItem('auth_token');\n        delete api.default.defaults.headers.common['Authorization'];\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await api.default.post('/auth/login', {\n        email,\n        password\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      api.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      setUser(userData);\n    };\n    const loginWithGoogle = async idToken => {\n      const response = await api.default.post('/auth/google', {\n        id_token: idToken\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      api.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      setUser(userData);\n    };\n    const register = async data => {\n      const response = await api.default.post('/auth/register', data);\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      api.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      setUser(userData);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      delete api.default.defaults.headers.common['Authorization'];\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await api.default.get('/auth/me');\n        setUser(response.data);\n      } catch (error) {\n        await logout();\n      }\n    };\n    const isAdmin = () => {\n      return user?.role === 'admin';\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        loginWithGoogle,\n        register,\n        logout,\n        refreshUser,\n        isAdmin\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":140,"map":[[15,2,37,0,"Object"],[15,8,37,0],[15,9,37,0,"defineProperty"],[15,23,37,0],[15,24,37,0,"exports"],[15,31,37,0],[16,4,37,0,"enumerable"],[16,14,37,0],[17,4,37,0,"get"],[17,7,37,0],[17,18,37,0,"get"],[17,19,37,0],[18,6,37,0],[18,13,37,0,"AuthProvider"],[18,25,37,0],[19,4,37,0],[20,2,37,0],[21,2,114,0,"Object"],[21,8,114,0],[21,9,114,0,"defineProperty"],[21,23,114,0],[21,24,114,0,"exports"],[21,31,114,0],[22,4,114,0,"enumerable"],[22,14,114,0],[23,4,114,0,"get"],[23,7,114,0],[23,18,114,0,"get"],[23,19,114,0],[24,6,114,0],[24,13,114,0,"useAuth"],[24,20,114,0],[25,4,114,0],[26,2,114,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_servicesApi"],[30,18,3,0],[30,21,3,0,"require"],[30,28,3,0],[30,29,3,0,"_dependencyMap"],[30,43,3,0],[31,2,3,0],[31,6,3,0,"api"],[31,9,3,0],[31,12,3,0,"_interopDefault"],[31,27,3,0],[31,28,3,0,"_servicesApi"],[31,40,3,0],[32,2,3,34],[32,6,3,34,"_reactJsxDevRuntime"],[32,25,3,34],[32,28,3,34,"require"],[32,35,3,34],[32,36,3,34,"_dependencyMap"],[32,50,3,34],[33,2,35,0],[33,8,35,6,"AuthContext"],[33,19,35,17],[33,35,35,20],[33,39,35,20,"createContext"],[33,45,35,33],[33,46,35,33,"createContext"],[33,59,35,33],[33,61,35,63,"undefined"],[33,70,35,72],[33,71,35,73],[34,2,37,7],[34,8,37,13,"AuthProvider"],[34,20,37,60],[34,23,37,63,"AuthProvider"],[34,24,37,64],[35,4,37,66,"children"],[36,2,37,75],[36,3,37,76],[36,8,37,81],[37,4,37,81,"_s"],[37,6,37,81],[38,4,38,2],[38,10,38,8],[38,11,38,9,"user"],[38,15,38,13],[38,17,38,15,"setUser"],[38,24,38,22],[38,25,38,23],[38,28,38,26],[38,32,38,26,"useState"],[38,38,38,34],[38,39,38,34,"useState"],[38,47,38,34],[38,49,38,48],[38,53,38,52],[38,54,38,53],[39,4,39,2],[39,10,39,8],[39,11,39,9,"loading"],[39,18,39,16],[39,20,39,18,"setLoading"],[39,30,39,28],[39,31,39,29],[39,34,39,32],[39,38,39,32,"useState"],[39,44,39,40],[39,45,39,40,"useState"],[39,53,39,40],[39,55,39,41],[39,59,39,45],[39,60,39,46],[40,4,41,2],[40,8,41,2,"useEffect"],[40,14,41,11],[40,15,41,11,"useEffect"],[40,24,41,11],[40,26,41,12],[40,32,41,18],[41,6,42,4,"checkAuth"],[41,15,42,13],[41,16,42,14],[41,17,42,15],[42,4,43,2],[42,5,43,3],[42,7,43,5],[42,9,43,7],[42,10,43,8],[43,4,45,2],[43,10,45,8,"checkAuth"],[43,19,45,17],[43,22,45,20],[43,28,45,20,"checkAuth"],[43,29,45,20],[43,34,45,32],[44,6,46,4],[44,10,46,8],[45,8,47,6],[45,14,47,12,"token"],[45,19,47,17],[45,22,47,20],[45,28,47,26,"AsyncStorage"],[45,40,47,38],[45,41,47,38,"default"],[45,48,47,38],[45,49,47,39,"getItem"],[45,56,47,46],[45,57,47,47],[45,69,47,59],[45,70,47,60],[46,8,48,6],[46,12,48,10,"token"],[46,17,48,15],[46,19,48,17],[47,10,49,8,"api"],[47,13,49,11],[47,14,49,11,"default"],[47,21,49,11],[47,22,49,12,"defaults"],[47,30,49,20],[47,31,49,21,"headers"],[47,38,49,28],[47,39,49,29,"common"],[47,45,49,35],[47,46,49,36],[47,61,49,51],[47,62,49,52],[47,65,49,55],[47,75,49,65,"token"],[47,80,49,70],[47,82,49,72],[48,10,50,8],[48,16,50,14,"response"],[48,24,50,22],[48,27,50,25],[48,33,50,31,"api"],[48,36,50,34],[48,37,50,34,"default"],[48,44,50,34],[48,45,50,35,"get"],[48,48,50,38],[48,49,50,39],[48,59,50,49],[48,60,50,50],[49,10,51,8,"setUser"],[49,17,51,15],[49,18,51,16,"response"],[49,26,51,24],[49,27,51,25,"data"],[49,31,51,29],[49,32,51,30],[50,8,52,6],[51,6,53,4],[51,7,53,5],[51,8,53,6],[51,15,53,13,"error"],[51,20,53,18],[51,22,53,20],[52,8,54,6],[52,14,54,12,"AsyncStorage"],[52,26,54,24],[52,27,54,24,"default"],[52,34,54,24],[52,35,54,25,"removeItem"],[52,45,54,35],[52,46,54,36],[52,58,54,48],[52,59,54,49],[53,8,55,6],[53,15,55,13,"api"],[53,18,55,16],[53,19,55,16,"default"],[53,26,55,16],[53,27,55,17,"defaults"],[53,35,55,25],[53,36,55,26,"headers"],[53,43,55,33],[53,44,55,34,"common"],[53,50,55,40],[53,51,55,41],[53,66,55,56],[53,67,55,57],[54,6,56,4],[54,7,56,5],[54,16,56,14],[55,8,57,6,"setLoading"],[55,18,57,16],[55,19,57,17],[55,24,57,22],[55,25,57,23],[56,6,58,4],[57,4,59,2],[57,5,59,3],[58,4,61,2],[58,10,61,8,"login"],[58,15,61,13],[58,18,61,16],[58,24,61,16,"login"],[58,25,61,23,"email"],[58,30,61,36],[58,32,61,38,"password"],[58,40,61,54],[58,45,61,59],[59,6,62,4],[59,12,62,10,"response"],[59,20,62,18],[59,23,62,21],[59,29,62,27,"api"],[59,32,62,30],[59,33,62,30,"default"],[59,40,62,30],[59,41,62,31,"post"],[59,45,62,35],[59,46,62,36],[59,59,62,49],[59,61,62,51],[60,8,62,53,"email"],[60,13,62,58],[61,8,62,60,"password"],[62,6,62,69],[62,7,62,70],[62,8,62,71],[63,6,63,4],[63,12,63,10],[64,8,63,12,"access_token"],[64,20,63,24],[65,8,63,26,"user"],[65,12,63,30],[65,14,63,32,"userData"],[66,6,63,41],[66,7,63,42],[66,10,63,45,"response"],[66,18,63,53],[66,19,63,54,"data"],[66,23,63,58],[67,6,65,4],[67,12,65,10,"AsyncStorage"],[67,24,65,22],[67,25,65,22,"default"],[67,32,65,22],[67,33,65,23,"setItem"],[67,40,65,30],[67,41,65,31],[67,53,65,43],[67,55,65,45,"access_token"],[67,67,65,57],[67,68,65,58],[68,6,66,4,"api"],[68,9,66,7],[68,10,66,7,"default"],[68,17,66,7],[68,18,66,8,"defaults"],[68,26,66,16],[68,27,66,17,"headers"],[68,34,66,24],[68,35,66,25,"common"],[68,41,66,31],[68,42,66,32],[68,57,66,47],[68,58,66,48],[68,61,66,51],[68,71,66,61,"access_token"],[68,83,66,73],[68,85,66,75],[69,6,67,4,"setUser"],[69,13,67,11],[69,14,67,12,"userData"],[69,22,67,20],[69,23,67,21],[70,4,68,2],[70,5,68,3],[71,4,70,2],[71,10,70,8,"loginWithGoogle"],[71,25,70,23],[71,28,70,26],[71,34,70,33,"idToken"],[71,41,70,48],[71,45,70,53],[72,6,71,4],[72,12,71,10,"response"],[72,20,71,18],[72,23,71,21],[72,29,71,27,"api"],[72,32,71,30],[72,33,71,30,"default"],[72,40,71,30],[72,41,71,31,"post"],[72,45,71,35],[72,46,71,36],[72,60,71,50],[72,62,71,52],[73,8,71,54,"id_token"],[73,16,71,62],[73,18,71,64,"idToken"],[74,6,71,72],[74,7,71,73],[74,8,71,74],[75,6,72,4],[75,12,72,10],[76,8,72,12,"access_token"],[76,20,72,24],[77,8,72,26,"user"],[77,12,72,30],[77,14,72,32,"userData"],[78,6,72,41],[78,7,72,42],[78,10,72,45,"response"],[78,18,72,53],[78,19,72,54,"data"],[78,23,72,58],[79,6,74,4],[79,12,74,10,"AsyncStorage"],[79,24,74,22],[79,25,74,22,"default"],[79,32,74,22],[79,33,74,23,"setItem"],[79,40,74,30],[79,41,74,31],[79,53,74,43],[79,55,74,45,"access_token"],[79,67,74,57],[79,68,74,58],[80,6,75,4,"api"],[80,9,75,7],[80,10,75,7,"default"],[80,17,75,7],[80,18,75,8,"defaults"],[80,26,75,16],[80,27,75,17,"headers"],[80,34,75,24],[80,35,75,25,"common"],[80,41,75,31],[80,42,75,32],[80,57,75,47],[80,58,75,48],[80,61,75,51],[80,71,75,61,"access_token"],[80,83,75,73],[80,85,75,75],[81,6,76,4,"setUser"],[81,13,76,11],[81,14,76,12,"userData"],[81,22,76,20],[81,23,76,21],[82,4,77,2],[82,5,77,3],[83,4,79,2],[83,10,79,8,"register"],[83,18,79,16],[83,21,79,19],[83,27,79,26,"data"],[83,31,79,44],[83,35,79,49],[84,6,80,4],[84,12,80,10,"response"],[84,20,80,18],[84,23,80,21],[84,29,80,27,"api"],[84,32,80,30],[84,33,80,30,"default"],[84,40,80,30],[84,41,80,31,"post"],[84,45,80,35],[84,46,80,36],[84,62,80,52],[84,64,80,54,"data"],[84,68,80,58],[84,69,80,59],[85,6,81,4],[85,12,81,10],[86,8,81,12,"access_token"],[86,20,81,24],[87,8,81,26,"user"],[87,12,81,30],[87,14,81,32,"userData"],[88,6,81,41],[88,7,81,42],[88,10,81,45,"response"],[88,18,81,53],[88,19,81,54,"data"],[88,23,81,58],[89,6,83,4],[89,12,83,10,"AsyncStorage"],[89,24,83,22],[89,25,83,22,"default"],[89,32,83,22],[89,33,83,23,"setItem"],[89,40,83,30],[89,41,83,31],[89,53,83,43],[89,55,83,45,"access_token"],[89,67,83,57],[89,68,83,58],[90,6,84,4,"api"],[90,9,84,7],[90,10,84,7,"default"],[90,17,84,7],[90,18,84,8,"defaults"],[90,26,84,16],[90,27,84,17,"headers"],[90,34,84,24],[90,35,84,25,"common"],[90,41,84,31],[90,42,84,32],[90,57,84,47],[90,58,84,48],[90,61,84,51],[90,71,84,61,"access_token"],[90,83,84,73],[90,85,84,75],[91,6,85,4,"setUser"],[91,13,85,11],[91,14,85,12,"userData"],[91,22,85,20],[91,23,85,21],[92,4,86,2],[92,5,86,3],[93,4,88,2],[93,10,88,8,"logout"],[93,16,88,14],[93,19,88,17],[93,25,88,17,"logout"],[93,26,88,17],[93,31,88,29],[94,6,89,4],[94,12,89,10,"AsyncStorage"],[94,24,89,22],[94,25,89,22,"default"],[94,32,89,22],[94,33,89,23,"removeItem"],[94,43,89,33],[94,44,89,34],[94,56,89,46],[94,57,89,47],[95,6,90,4],[95,13,90,11,"api"],[95,16,90,14],[95,17,90,14,"default"],[95,24,90,14],[95,25,90,15,"defaults"],[95,33,90,23],[95,34,90,24,"headers"],[95,41,90,31],[95,42,90,32,"common"],[95,48,90,38],[95,49,90,39],[95,64,90,54],[95,65,90,55],[96,6,91,4,"setUser"],[96,13,91,11],[96,14,91,12],[96,18,91,16],[96,19,91,17],[97,4,92,2],[97,5,92,3],[98,4,94,2],[98,10,94,8,"refreshUser"],[98,21,94,19],[98,24,94,22],[98,30,94,22,"refreshUser"],[98,31,94,22],[98,36,94,34],[99,6,95,4],[99,10,95,8],[100,8,96,6],[100,14,96,12,"response"],[100,22,96,20],[100,25,96,23],[100,31,96,29,"api"],[100,34,96,32],[100,35,96,32,"default"],[100,42,96,32],[100,43,96,33,"get"],[100,46,96,36],[100,47,96,37],[100,57,96,47],[100,58,96,48],[101,8,97,6,"setUser"],[101,15,97,13],[101,16,97,14,"response"],[101,24,97,22],[101,25,97,23,"data"],[101,29,97,27],[101,30,97,28],[102,6,98,4],[102,7,98,5],[102,8,98,6],[102,15,98,13,"error"],[102,20,98,18],[102,22,98,20],[103,8,99,6],[103,14,99,12,"logout"],[103,20,99,18],[103,21,99,19],[103,22,99,20],[104,6,100,4],[105,4,101,2],[105,5,101,3],[106,4,103,2],[106,10,103,8,"isAdmin"],[106,17,103,15],[106,20,103,18,"isAdmin"],[106,21,103,18],[106,26,103,24],[107,6,104,4],[107,13,104,11,"user"],[107,17,104,15],[107,19,104,17,"role"],[107,23,104,21],[107,28,104,26],[107,35,104,33],[108,4,105,2],[108,5,105,3],[109,4,107,2],[109,24,108,4],[109,28,108,4,"_reactJsxDevRuntime"],[109,47,108,4],[109,48,108,4,"jsxDEV"],[109,54,108,4],[109,56,108,5,"AuthContext"],[109,67,108,16],[109,68,108,17,"Provider"],[109,76,108,25],[110,6,108,26,"value"],[110,11,108,31],[110,13,108,33],[111,8,108,35,"user"],[111,12,108,39],[112,8,108,41,"loading"],[112,15,108,48],[113,8,108,50,"login"],[113,13,108,55],[114,8,108,57,"loginWithGoogle"],[114,23,108,72],[115,8,108,74,"register"],[115,16,108,82],[116,8,108,84,"logout"],[116,14,108,90],[117,8,108,92,"refreshUser"],[117,19,108,103],[118,8,108,105,"isAdmin"],[119,6,108,113],[119,7,108,115],[120,6,108,115,"children"],[120,14,108,115],[120,16,109,7,"children"],[121,4,109,15],[122,6,109,15,"fileName"],[122,14,109,15],[122,16,109,15,"_jsxFileName"],[122,28,109,15],[123,6,109,15,"lineNumber"],[123,16,109,15],[124,6,109,15,"columnNumber"],[124,18,109,15],[125,4,109,15],[125,11,110,26],[125,12,110,27],[126,2,112,0],[126,3,112,1],[127,2,112,2,"_s"],[127,4,112,2],[127,5,37,13,"AuthProvider"],[127,17,37,60],[128,2,37,60,"_c"],[128,4,37,60],[128,7,37,13,"AuthProvider"],[128,19,37,60],[129,2,114,7],[129,8,114,13,"useAuth"],[129,15,114,20],[129,18,114,23,"useAuth"],[129,19,114,23],[129,24,114,29],[130,4,114,29,"_s2"],[130,7,114,29],[131,4,115,2],[131,10,115,8,"context"],[131,17,115,15],[131,20,115,18],[131,24,115,18,"useContext"],[131,30,115,28],[131,31,115,28,"useContext"],[131,41,115,28],[131,43,115,29,"AuthContext"],[131,54,115,40],[131,55,115,41],[132,4,116,2],[132,8,116,6,"context"],[132,15,116,13],[132,20,116,18,"undefined"],[132,29,116,27],[132,31,116,29],[133,6,117,4],[133,12,117,10],[133,16,117,14,"Error"],[133,21,117,19],[133,22,117,20],[133,67,117,65],[133,68,117,66],[134,4,118,2],[135,4,119,2],[135,11,119,9,"context"],[135,18,119,16],[136,2,120,0],[136,3,120,1],[137,2,120,2,"_s2"],[137,5,120,2],[137,6,114,13,"useAuth"],[137,13,114,20],[138,2,114,20],[138,6,114,20,"_c"],[138,8,114,20],[139,2,114,20,"$RefreshReg$"],[139,14,114,20],[139,15,114,20,"_c"],[139,17,114,20],[140,0,114,20],[140,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","loginWithGoogle","register","logout","refreshUser","isAdmin","useAuth"],"mappings":"AAA;+DCoC;YCI;GDE;oBEE;GFc;gBGE;GHO;0BIE;GJO;mBKE;GLO;iBME;GNI;sBOE;GPO;kBQE;GRE;CDO;uBUE;CVM"},"hasCjsExports":false},"type":"js/module"}]}