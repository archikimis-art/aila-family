{"dependencies":[{"name":"../addEventListener","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":181},"end":{"line":10,"column":55,"index":236}}],"key":"4xvCwHsxCKw+bkXrhCHsTztm4zw=","exportNames":["*"],"imports":1}},{"name":"../canUseDom","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":237},"end":{"line":11,"column":37,"index":274}}],"key":"NAgv5vx4h/J1uxoLSWxqZG/Z81Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),_e.getActiveModality=function(){return s},_e.getModality=function(){return l},_e.addModalityListener=function(e){return f.add(e),()=>{f.delete(e)}},_e.testOnly_resetActiveModality=function(){v=!1,s=y,l=y};var e,t,n,o=r(d[0],\"../addEventListener\"),u=r(d[1],\"../canUseDom\"),c=(e=u)&&e.__esModule?e:{default:e},s='keyboard',l='keyboard',v=!1,f=new Set,y='keyboard',E='mouse',L='touch',h='contextmenu',p='mousedown',w='mousemove',b='mouseup',M='pointerdown',_='pointermove',k='scroll',K='selectionchange',A='touchcancel',O='touchmove',S='touchstart',j={passive:!0},x={capture:!0,passive:!0};function D(){null==t&&null==n||(null!=t&&(l=t,t=null),null!=n&&(s=n,n=null),U())}function P(e){var t=e.type;if(v||(t===p&&s!==E&&(l=E,s=E,U()),t===w&&l!==E&&(l=E,U())),t===S)return v=!0,e.touches&&e.touches.length>1&&(v=!1),void(s!==L&&(l=L,s=L,U()));t!==h&&t!==b&&t!==K&&t!==k&&t!==A&&t!==O||(v=!1)}function U(){var e={activeModality:s,modality:l};f.forEach(t=>{t(e)})}c.default&&((0,o.addEventListener)(window,'blur',function(){t=l,n=s,s=y,l=y,U(),v=!1},j),(0,o.addEventListener)(window,'focus',function(){D()},j),(0,o.addEventListener)(document,'keydown',function(e){e.metaKey||e.altKey||e.ctrlKey||l!==y&&(l=y,s=y,U())},x),(0,o.addEventListener)(document,'visibilitychange',function(){'hidden'!==document.visibilityState&&D()},x),(0,o.addEventListener)(document,M,P,x),(0,o.addEventListener)(document,_,P,x),(0,o.addEventListener)(document,h,P,x),(0,o.addEventListener)(document,p,P,x),(0,o.addEventListener)(document,w,P,x),(0,o.addEventListener)(document,b,P,x),(0,o.addEventListener)(document,A,P,x),(0,o.addEventListener)(document,O,P,x),(0,o.addEventListener)(document,S,P,x),(0,o.addEventListener)(document,K,P,x),(0,o.addEventListener)(document,k,P,x))});","lineCount":1,"map":[[1,92,172,0,"_e"],[1,95,172,0,"getActiveModality"],[1,113,172,7],[1,124,173,2],[1,131,173,9,"activeModality"],[1,132,174,0],[1,134,175,0,"_e"],[1,137,175,0,"getModality"],[1,149,175,7],[1,160,176,2],[1,167,176,9,"modality"],[1,168,177,0],[1,170,178,0,"_e"],[1,173,178,0,"addModalityListener"],[1,193,178,7],[1,202,178,36,"listener"],[1,205,180,2],[1,212,179,2,"listeners"],[1,214,179,12,"add"],[1,218,179,16,"listener"],[1,221,180,9],[1,226,181,4,"listeners"],[1,228,181,14,"delete"],[1,235,181,21,"listener"],[1,238,183,0],[1,240,184,0,"_e"],[1,243,184,0,"testOnly_resetActiveModality"],[1,272,184,7],[1,283,185,2,"isEmulatingMouseEvents"],[1,286,185,27],[1,288,186,2,"activeModality"],[1,290,186,19,"KEYBOARD"],[1,292,187,2,"modality"],[1,294,187,13,"KEYBOARD"],[1,295,188,0],[1,297,10,0],[1,301],[1,303,15,4,"previousModality"],[1,305,16,4,"previousActiveModality"],[1,307,10,0,"_addEventListener"],[1,309,10,0,"r"],[1,311,10,0,"d"],[1,313,10,0],[1,339,11,0,"_canUseDom"],[1,341,11,0,"r"],[1,343,11,0,"d"],[1,345,11,0],[1,364,11,0,"canUseDOM"],[1,367],[1,369,11,0,"_canUseDom"],[1,373],[1,400,13,4,"activeModality"],[1,402,13,21],[1,413,14,4,"modality"],[1,415,14,15],[1,426,17,4,"isEmulatingMouseEvents"],[1,429,17,29],[1,431,18,4,"listeners"],[1,433,18,16],[1,437,18,20,"Set"],[1,441,19,4,"KEYBOARD"],[1,443,19,15],[1,454,20,4,"MOUSE"],[1,456,20,12],[1,464,21,4,"TOUCH"],[1,466,21,12],[1,474,23,4,"CONTEXTMENU"],[1,476,23,18],[1,490,26,4,"MOUSEDOWN"],[1,492,26,16],[1,504,27,4,"MOUSEMOVE"],[1,506,27,16],[1,518,28,4,"MOUSEUP"],[1,520,28,14],[1,530,29,4,"POINTERDOWN"],[1,532,29,18],[1,546,30,4,"POINTERMOVE"],[1,548,30,18],[1,562,31,4,"SCROLL"],[1,564,31,13],[1,573,32,4,"SELECTIONCHANGE"],[1,575,32,22],[1,593,33,4,"TOUCHCANCEL"],[1,595,33,18],[1,609,34,4,"TOUCHMOVE"],[1,611,34,16],[1,623,35,4,"TOUCHSTART"],[1,625,35,17],[1,638,37,4,"bubbleOptions"],[1,640,37,20],[1,641,38,2,"passive"],[1,650,38,11],[1,653,40,4,"captureOptions"],[1,655,40,21],[1,656,41,2,"capture"],[1,665,41,11],[1,667,42,2,"passive"],[1,676,42,11],[1,679,44,0],[1,688,44,9,"restoreModality"],[1,692,45,26],[1,698,45,6,"previousModality"],[1,701,45,60],[1,707,45,34,"previousActiveModality"],[1,711,46,28],[1,717,46,8,"previousModality"],[1,721,47,6,"modality"],[1,723,47,17,"previousModality"],[1,725,48,6,"previousModality"],[1,727,48,25],[1,733,50,34],[1,739,50,8,"previousActiveModality"],[1,743,51,6,"activeModality"],[1,745,51,23,"previousActiveModality"],[1,747,52,6,"previousActiveModality"],[1,749,52,31],[1,755,54,4,"callListeners"],[1,759,56,0],[1,760,84,0],[1,769,84,9,"onPointerish"],[1,771,84,22,"event"],[1,774,85,2],[1,778,85,6,"eventType"],[1,780,85,18,"event"],[1,782,85,24,"type"],[1,787,122,4],[1,790,105,9,"isEmulatingMouseEvents"],[1,794,106,10,"eventType"],[1,798,106,24,"MOUSEDOWN"],[1,801,107,12,"activeModality"],[1,805,107,31,"MOUSE"],[1,809,108,10,"modality"],[1,811,108,21,"MOUSE"],[1,813,109,10,"activeModality"],[1,815,109,27,"MOUSE"],[1,817,110,10,"callListeners"],[1,822,113,10,"eventType"],[1,826,113,24,"MOUSEMOVE"],[1,829,114,12,"modality"],[1,833,114,25,"MOUSE"],[1,837,115,10,"modality"],[1,839,115,21,"MOUSE"],[1,841,116,10,"callListeners"],[1,847,122,8,"eventType"],[1,851,122,22,"TOUCHSTART"],[1,853,132,6],[1,860,123,6,"isEmulatingMouseEvents"],[1,863,123,31],[1,865,124,10,"event"],[1,867,124,16,"touches"],[1,876,124,27,"event"],[1,878,124,33,"touches"],[1,886,124,41,"length"],[1,893,124,50],[1,897,125,8,"isEmulatingMouseEvents"],[1,900,125,33],[1,908,127,10,"activeModality"],[1,912,127,29,"TOUCH"],[1,916,128,8,"modality"],[1,918,128,19,"TOUCH"],[1,920,129,8,"activeModality"],[1,922,129,25,"TOUCH"],[1,924,130,8,"callListeners"],[1,930,137,8,"eventType"],[1,934,137,22,"CONTEXTMENU"],[1,937,137,37,"eventType"],[1,941,137,51,"MOUSEUP"],[1,944,137,62,"eventType"],[1,948,137,76,"SELECTIONCHANGE"],[1,951,137,95,"eventType"],[1,955,137,109,"SCROLL"],[1,958,137,119,"eventType"],[1,962,137,133,"TOUCHCANCEL"],[1,965,137,148,"eventType"],[1,969,137,162,"TOUCHMOVE"],[1,973,138,6,"isEmulatingMouseEvents"],[1,976,138,31],[1,978,141,0],[1,979,163,0],[1,988,163,9,"callListeners"],[1,992,164,2],[1,996,164,6,"value"],[1,998,164,14],[1,999,165,4,"activeModality"],[1,1016,166,4,"modality"],[1,1028,168,2,"listeners"],[1,1030,168,12,"forEach"],[1,1038,168,20,"listener"],[1,1042,169,4,"listener"],[1,1044,169,13,"value"],[1,1048,171,0],[1,1049,142,4,"canUseDOM"],[1,1051,142,13,"default"],[1,1062,144,2],[1,1064,144,2,"addEventListener"],[1,1066,144,18,"addEventListener"],[1,1084,144,19,"window"],[1,1091,22,11],[1,1098,57,0],[1,1109,58,2,"previousModality"],[1,1111,58,21,"modality"],[1,1113,59,2,"previousActiveModality"],[1,1115,59,27,"activeModality"],[1,1117,60,2,"activeModality"],[1,1119,60,19,"KEYBOARD"],[1,1121,61,2,"modality"],[1,1123,61,13,"KEYBOARD"],[1,1125,62,2,"callListeners"],[1,1129,64,2,"isEmulatingMouseEvents"],[1,1132,64,27],[1,1133,65,0],[1,1135,144,47,"bubbleOptions"],[1,1139,145,2],[1,1141,145,2,"addEventListener"],[1,1143,145,18,"addEventListener"],[1,1161,145,19,"window"],[1,1168,24,12],[1,1176,66,0],[1,1187,67,2,"restoreModality"],[1,1190,68,0],[1,1192,145,49,"bubbleOptions"],[1,1196,148,2],[1,1198,148,2,"addEventListener"],[1,1200,148,18,"addEventListener"],[1,1218,148,19,"document"],[1,1227,25,14],[1,1237,69,0],[1,1246,69,19,"event"],[1,1249,70,6,"event"],[1,1251,70,12,"metaKey"],[1,1260,70,23,"event"],[1,1262,70,29,"altKey"],[1,1270,70,39,"event"],[1,1272,70,45,"ctrlKey"],[1,1281,73,6,"modality"],[1,1285,73,19,"KEYBOARD"],[1,1289,74,4,"modality"],[1,1291,74,15,"KEYBOARD"],[1,1293,75,4,"activeModality"],[1,1295,75,21,"KEYBOARD"],[1,1297,76,4,"callListeners"],[1,1301,78,0],[1,1303,148,49,"captureOptions"],[1,1307,149,2],[1,1309,149,2,"addEventListener"],[1,1311,149,18,"addEventListener"],[1,1329,149,19,"document"],[1,1338,36,23],[1,1357,79,0],[1,1368,80,35],[1,1379,80,6,"document"],[1,1388,80,15,"visibilityState"],[1,1405,81,4,"restoreModality"],[1,1408,83,0],[1,1410,149,67,"captureOptions"],[1,1414,150,2],[1,1416,150,2,"addEventListener"],[1,1418,150,18,"addEventListener"],[1,1436,150,19,"document"],[1,1445,150,29,"POINTERDOWN"],[1,1447,150,42,"onPointerish"],[1,1449,150,56,"captureOptions"],[1,1453,151,2],[1,1455,151,2,"addEventListener"],[1,1457,151,18,"addEventListener"],[1,1475,151,19,"document"],[1,1484,151,29,"POINTERMOVE"],[1,1486,151,42,"onPointerish"],[1,1488,151,56,"captureOptions"],[1,1492,153,2],[1,1494,153,2,"addEventListener"],[1,1496,153,18,"addEventListener"],[1,1514,153,19,"document"],[1,1523,153,29,"CONTEXTMENU"],[1,1525,153,42,"onPointerish"],[1,1527,153,56,"captureOptions"],[1,1531,154,2],[1,1533,154,2,"addEventListener"],[1,1535,154,18,"addEventListener"],[1,1553,154,19,"document"],[1,1562,154,29,"MOUSEDOWN"],[1,1564,154,40,"onPointerish"],[1,1566,154,54,"captureOptions"],[1,1570,155,2],[1,1572,155,2,"addEventListener"],[1,1574,155,18,"addEventListener"],[1,1592,155,19,"document"],[1,1601,155,29,"MOUSEMOVE"],[1,1603,155,40,"onPointerish"],[1,1605,155,54,"captureOptions"],[1,1609,156,2],[1,1611,156,2,"addEventListener"],[1,1613,156,18,"addEventListener"],[1,1631,156,19,"document"],[1,1640,156,29,"MOUSEUP"],[1,1642,156,38,"onPointerish"],[1,1644,156,52,"captureOptions"],[1,1648,157,2],[1,1650,157,2,"addEventListener"],[1,1652,157,18,"addEventListener"],[1,1670,157,19,"document"],[1,1679,157,29,"TOUCHCANCEL"],[1,1681,157,42,"onPointerish"],[1,1683,157,56,"captureOptions"],[1,1687,158,2],[1,1689,158,2,"addEventListener"],[1,1691,158,18,"addEventListener"],[1,1709,158,19,"document"],[1,1718,158,29,"TOUCHMOVE"],[1,1720,158,40,"onPointerish"],[1,1722,158,54,"captureOptions"],[1,1726,159,2],[1,1728,159,2,"addEventListener"],[1,1730,159,18,"addEventListener"],[1,1748,159,19,"document"],[1,1757,159,29,"TOUCHSTART"],[1,1759,159,41,"onPointerish"],[1,1761,159,55,"captureOptions"],[1,1765,160,2],[1,1767,160,2,"addEventListener"],[1,1769,160,18,"addEventListener"],[1,1787,160,19,"document"],[1,1796,160,29,"SELECTIONCHANGE"],[1,1798,160,46,"onPointerish"],[1,1800,160,60,"captureOptions"],[1,1804,161,2],[1,1806,161,2,"addEventListener"],[1,1808,161,18,"addEventListener"],[1,1826,161,19,"document"],[1,1835,161,29,"SCROLL"],[1,1837,161,37,"onPointerish"],[1,1839,161,51,"captureOptions"],[1,1842,188,1],[1,1845]],"functionMap":{"names":["<global>","supportsPointerEvent","restoreModality","onBlurWindow","onFocusWindow","onKeyDown","onVisibilityChange","onPointerish","callListeners","listeners.forEach$argument_0","getActiveModality","getModality","addModalityListener","<anonymous>","testOnly_resetActiveModality"],"mappings":"AAA;2BCW,sED;AEgC;CFY;AGC;CHQ;AIC;CJE;AKC;CLS;AMC;CNI;AOC;CPyD;AQsB;oBCK;GDE;CRC;OUC;CVE;OWC;CXE;OYC;SCE;GDE;CZC;OcC"},"hasCjsExports":false},"type":"js/module"}]}