{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":131},"end":{"line":3,"column":69,"index":200}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":201},"end":{"line":4,"column":48,"index":249}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";var e=$RefreshSig$(),t=$RefreshSig$();Object.defineProperty(_e,'__esModule',{value:!0}),_e.ConversionProvider=f,_e.useConversion=C;var n,o=r(d[0],\"react\"),s=r(d[1],\"@react-native-async-storage/async-storage\"),u=(n=s)&&n.__esModule?n:{default:n},l=r(d[2],\"./AuthContext\"),c=r(d[3],\"react/jsx-dev-runtime\");const E=(0,o.createContext)(void 0),_={ACTIONS_COUNT:'aila_actions_count',EXPORTS_COUNT:'aila_exports_count',WELCOME_SEEN:'aila_welcome_seen',WELCOME_EXPIRY:'aila_welcome_expiry',LAST_PROMPT_DATE:'aila_last_prompt',REFERRAL_CODE:'aila_referral_code'};function f({children:t}){e();const{user:n}=(0,l.useAuth)(),[s,f]=(0,o.useState)(0),[C,S]=(0,o.useState)(0),[O,I]=(0,o.useState)(0),[R,P]=(0,o.useState)(!1),[T,p]=(0,o.useState)(null),[v,w]=(0,o.useState)(!0),[A,h]=(0,o.useState)(null),[N,x]=(0,o.useState)(null);(0,o.useEffect)(()=>{L()},[n]);const L=async()=>{try{const[e,t,o,s,l]=await Promise.all([u.default.getItem(_.ACTIONS_COUNT),u.default.getItem(_.EXPORTS_COUNT),u.default.getItem(_.WELCOME_SEEN),u.default.getItem(_.WELCOME_EXPIRY),u.default.getItem(_.REFERRAL_CODE)]);e&&f(parseInt(e,10)),t&&S(parseInt(t,10)),o&&w('true'===o),s&&h(new Date(s)),l&&x(l),!o&&n&&y()}catch(e){console.log('Error loading conversion data:',e)}},y=async()=>{const e=new Date;e.setHours(e.getHours()+24),h(e),w(!1),P(!0),p('welcome'),await u.default.setItem(_.WELCOME_EXPIRY,e.toISOString())},D=async e=>{const t=await u.default.getItem(_.LAST_PROMPT_DATE);if(t){const n=new Date(t);if((Date.now()-n.getTime())/36e5<24&&'welcome'!==e)return}P(!0),p(e),await u.default.setItem(_.LAST_PROMPT_DATE,(new Date).toISOString())},M=!!A&&new Date<A;return(0,c.jsxDEV)(E.Provider,{value:{actionsCount:s,exportsCount:C,personsCount:O,shouldShowPremiumPrompt:R,promptType:T,trackAction:async e=>{const t=s+1;if(f(t),await u.default.setItem(_.ACTIONS_COUNT,t.toString()),'export'===e){const e=C+1;S(e),await u.default.setItem(_.EXPORTS_COUNT,e.toString()),D('export')}'add_person'===e&&O>0&&O%5==0&&O>=10&&D('tree_size')},setPersonsCount:e=>{I(e),10===e&&D('tree_size')},dismissPrompt:async()=>{P(!1),p(null),v||(w(!0),await u.default.setItem(_.WELCOME_SEEN,'true'))},hasSeenWelcomeOffer:v,welcomeOfferExpiry:A,isWelcomeOfferValid:M,referralCode:N,generateReferralCode:()=>{if(N)return N;const e=`AILA${Math.random().toString(36).substring(2,8).toUpperCase()}`;return x(e),u.default.setItem(_.REFERRAL_CODE,e),e}},children:t},void 0,!1,{fileName:\"/app/frontend/src/context/ConversionContext.tsx\",lineNumber:164,columnNumber:5},this)}function C(){t();const e=(0,o.useContext)(E);if(void 0===e)throw new Error('useConversion must be used within a ConversionProvider');return e}var S;e(f,\"zb1GJ/6E9KZ6e/PBFv0EVRYi48Q=\",!1,function(){return[l.useAuth]}),S=f,t(C,\"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\"),$RefreshReg$(S,\"ConversionProvider\")});","lineCount":1,"map":[[1,130,42,0,"_e"],[1,133,42,0,"ConversionProvider"],[1,154,186,0,"_e"],[1,157,186,0,"useConversion"],[1,173,1,0],[1,177],[1,179,1,0,"_react"],[1,181,1,0,"r"],[1,183,1,0,"d"],[1,185,1,0],[1,197,3,0,"_reactNativeAsyncStorageAsyncStorage"],[1,199,3,0,"r"],[1,201,3,0,"d"],[1,203,3,0],[1,251,3,0,"AsyncStorage"],[1,254],[1,256,3,0,"_reactNativeAsyncStorageAsyncStorage"],[1,260],[1,287,4,0,"_AuthContext"],[1,289,4,0,"r"],[1,291,4,0,"d"],[1,293,4,0],[1,313,4,48,"_reactJsxDevRuntime"],[1,315,4,48,"r"],[1,317,4,48,"d"],[1,319,4,48],[1,347,31,0],[1,353,31,6,"ConversionContext"],[1,356,31,26],[1,358,31,26,"createContext"],[1,360,31,39,"createContext"],[1,380,31,75,"undefined"],[1,383,33,6,"STORAGE_KEYS"],[1,385,33,21],[1,386,34,2,"ACTIONS_COUNT"],[1,400,34,17],[1,421,35,2,"EXPORTS_COUNT"],[1,435,35,17],[1,456,36,2,"WELCOME_SEEN"],[1,469,36,16],[1,489,37,2,"WELCOME_EXPIRY"],[1,504,37,18],[1,526,38,2,"LAST_PROMPT_DATE"],[1,543,38,20],[1,562,39,2,"REFERRAL_CODE"],[1,576,39,17],[1,598,42,7],[1,607,42,16,"ConversionProvider"],[1,610,42,35,"children"],[1,619,42,37,"children"],[1,623,42,74,"_s"],[1,627,43,2],[1,633,43,8,"user"],[1,638,43,10,"user"],[1,642,43,19],[1,644,43,19,"useAuth"],[1,646,43,26,"useAuth"],[1,658,45,9,"actionsCount"],[1,660,45,23,"setActionsCount"],[1,664,45,42],[1,666,45,42,"useState"],[1,668,45,50,"useState"],[1,678,45,51],[1,682,46,9,"exportsCount"],[1,684,46,23,"setExportsCount"],[1,688,46,42],[1,690,46,42,"useState"],[1,692,46,50,"useState"],[1,702,46,51],[1,706,47,9,"personsCount"],[1,708,47,23,"setPersonsCountState"],[1,712,47,47],[1,714,47,47,"useState"],[1,716,47,55,"useState"],[1,726,47,56],[1,730,48,9,"shouldShowPremiumPrompt"],[1,732,48,34,"setShouldShowPremiumPrompt"],[1,736,48,64],[1,738,48,64,"useState"],[1,740,48,72,"useState"],[1,751,48,73],[1,755,49,9,"promptType"],[1,757,49,21,"setPromptType"],[1,761,49,38],[1,763,49,38,"useState"],[1,765,49,46,"useState"],[1,775,49,107],[1,782,50,9,"hasSeenWelcomeOffer"],[1,784,50,30,"setHasSeenWelcomeOffer"],[1,788,50,56],[1,790,50,56,"useState"],[1,792,50,64,"useState"],[1,803,50,65],[1,807,51,9,"welcomeOfferExpiry"],[1,809,51,29,"setWelcomeOfferExpiry"],[1,813,51,54],[1,815,51,54,"useState"],[1,817,51,62,"useState"],[1,827,51,76],[1,834,52,9,"referralCode"],[1,836,52,23,"setReferralCode"],[1,840,52,42],[1,842,52,42,"useState"],[1,844,52,50,"useState"],[1,854,52,66],[1,861,55,2],[1,863,55,2,"useEffect"],[1,865,55,11,"useEffect"],[1,876,55,12],[1,881,56,4,"loadSavedData"],[1,886,57,5],[1,887,57,6,"user"],[1,891,59,2],[1,897,59,8,"loadSavedData"],[1,899,59,24,"async"],[1,909,60,4],[1,913,61,6],[1,919,61,13,"actions"],[1,921,61,22,"exports"],[1,923,61,31,"welcomeSeen"],[1,925,61,44,"welcomeExp"],[1,927,61,56,"refCode"],[1,936,61,73,"Promise"],[1,944,61,81,"all"],[1,948,61,85],[1,949,62,8,"AsyncStorage"],[1,951,62,20,"default"],[1,959,62,21,"getItem"],[1,967,62,29,"STORAGE_KEYS"],[1,969,62,42,"ACTIONS_COUNT"],[1,984,63,8,"AsyncStorage"],[1,986,63,20,"default"],[1,994,63,21,"getItem"],[1,1002,63,29,"STORAGE_KEYS"],[1,1004,63,42,"EXPORTS_COUNT"],[1,1019,64,8,"AsyncStorage"],[1,1021,64,20,"default"],[1,1029,64,21,"getItem"],[1,1037,64,29,"STORAGE_KEYS"],[1,1039,64,42,"WELCOME_SEEN"],[1,1053,65,8,"AsyncStorage"],[1,1055,65,20,"default"],[1,1063,65,21,"getItem"],[1,1071,65,29,"STORAGE_KEYS"],[1,1073,65,42,"WELCOME_EXPIRY"],[1,1089,66,8,"AsyncStorage"],[1,1091,66,20,"default"],[1,1099,66,21,"getItem"],[1,1107,66,29,"STORAGE_KEYS"],[1,1109,66,42,"REFERRAL_CODE"],[1,1126,69,10,"actions"],[1,1129,69,19,"setActionsCount"],[1,1131,69,35,"parseInt"],[1,1140,69,44,"actions"],[1,1142,69,53],[1,1147,70,10,"exports"],[1,1150,70,19,"setExportsCount"],[1,1152,70,35,"parseInt"],[1,1161,70,44,"exports"],[1,1163,70,53],[1,1168,71,10,"welcomeSeen"],[1,1171,71,23,"setHasSeenWelcomeOffer"],[1,1173,71,62],[1,1182,71,46,"welcomeSeen"],[1,1185,72,10,"welcomeExp"],[1,1188,72,22,"setWelcomeOfferExpiry"],[1,1190,72,44],[1,1194,72,48,"Date"],[1,1199,72,53,"welcomeExp"],[1,1203,73,10,"refCode"],[1,1206,73,19,"setReferralCode"],[1,1208,73,35,"refCode"],[1,1212,76,11,"welcomeSeen"],[1,1215,76,26,"user"],[1,1218,77,8,"showWelcomeOffer"],[1,1221,79,4],[1,1222,79,6],[1,1228,79,13,"error"],[1,1231,80,6,"console"],[1,1239,80,14,"log"],[1,1243,80,18],[1,1276,80,52,"error"],[1,1278,81,4],[1,1281,84,8,"showWelcomeOffer"],[1,1283,84,27,"async"],[1,1293,85,4],[1,1299,85,10,"expiry"],[1,1301,85,19],[1,1305,85,23,"Date"],[1,1310,86,4,"expiry"],[1,1312,86,11,"setHours"],[1,1321,86,20,"expiry"],[1,1323,86,27,"getHours"],[1,1334,86,40],[1,1338,88,4,"setWelcomeOfferExpiry"],[1,1340,88,26,"expiry"],[1,1343,89,4,"setHasSeenWelcomeOffer"],[1,1346,89,27],[1,1349,90,4,"setShouldShowPremiumPrompt"],[1,1352,90,31],[1,1355,91,4,"setPromptType"],[1,1357,91,18],[1,1374,93,10,"AsyncStorage"],[1,1376,93,22,"default"],[1,1384,93,23,"setItem"],[1,1392,93,31,"STORAGE_KEYS"],[1,1394,93,44,"WELCOME_EXPIRY"],[1,1409,93,60,"expiry"],[1,1411,93,67,"toISOString"],[1,1427,125,8,"triggerPrompt"],[1,1429,125,24,"async"],[1,1439,127,4],[1,1445,127,10,"lastPrompt"],[1,1453,127,29,"AsyncStorage"],[1,1455,127,41,"default"],[1,1463,127,42,"getItem"],[1,1471,127,50,"STORAGE_KEYS"],[1,1473,127,63,"LAST_PROMPT_DATE"],[1,1491,128,4],[1,1494,128,8,"lastPrompt"],[1,1496,128,20],[1,1497,129,6],[1,1503,129,12,"lastDate"],[1,1505,129,23],[1,1509,129,27,"Date"],[1,1514,129,32,"lastPrompt"],[1,1517,131,6],[1,1521,130,26,"Date"],[1,1526,130,31,"now"],[1,1532,130,39,"lastDate"],[1,1534,130,48,"getTime"],[1,1545,130,57],[1,1550,131,23],[1,1554,131,38],[1,1566,131,29,"type"],[1,1568,132,8],[1,1574,134,4],[1,1575,136,4,"setShouldShowPremiumPrompt"],[1,1578,136,31],[1,1581,137,4,"setPromptType"],[1,1583,137,18,"type"],[1,1592,138,10,"AsyncStorage"],[1,1594,138,22,"default"],[1,1602,138,23,"setItem"],[1,1610,138,31,"STORAGE_KEYS"],[1,1612,138,44,"LAST_PROMPT_DATE"],[1,1630,138,62],[1,1634,138,66,"Date"],[1,1640,138,73,"toISOString"],[1,1656,161,8,"isWelcomeOfferValid"],[1,1660,161,30,"welcomeOfferExpiry"],[1,1663,161,51],[1,1667,161,55,"Date"],[1,1672,161,64,"welcomeOfferExpiry"],[1,1674,163,2],[1,1681,164,4],[1,1683,164,4,"_reactJsxDevRuntime"],[1,1685,164,4,"jsxDEV"],[1,1693,164,5,"ConversionContext"],[1,1695,164,23,"Provider"],[1,1704,164,31],[1,1705,165,6,"value"],[1,1711,165,13],[1,1712,166,8,"actionsCount"],[1,1727,167,8,"exportsCount"],[1,1742,168,8,"personsCount"],[1,1757,169,8,"shouldShowPremiumPrompt"],[1,1783,170,8,"promptType"],[1,1796,171,8,"trackAction"],[1,1808,96,22,"async"],[1,1818,97,4],[1,1824,97,10,"newCount"],[1,1826,97,21,"actionsCount"],[1,1828,97,36],[1,1830,101,4],[1,1833,98,4,"setActionsCount"],[1,1835,98,20,"newCount"],[1,1844,99,10,"AsyncStorage"],[1,1846,99,22,"default"],[1,1854,99,23,"setItem"],[1,1862,99,31,"STORAGE_KEYS"],[1,1864,99,44,"ACTIONS_COUNT"],[1,1878,99,59,"newCount"],[1,1880,99,68,"toString"],[1,1892,101,19],[1,1903,101,8,"action"],[1,1905,101,29],[1,1906,102,6],[1,1912,102,12,"newExports"],[1,1914,102,25,"exportsCount"],[1,1916,102,40],[1,1918,103,6,"setExportsCount"],[1,1920,103,22,"newExports"],[1,1929,104,12,"AsyncStorage"],[1,1931,104,24,"default"],[1,1939,104,25,"setItem"],[1,1947,104,33,"STORAGE_KEYS"],[1,1949,104,46,"EXPORTS_COUNT"],[1,1963,104,61,"newExports"],[1,1965,104,72,"toString"],[1,1977,107,6,"triggerPrompt"],[1,1979,107,20],[1,1988,108,4],[1,1989,111,19],[1,2004,111,8,"action"],[1,2007,111,35,"personsCount"],[1,2009,111,50],[1,2012,111,55,"personsCount"],[1,2014,111,70],[1,2017,111,76],[1,2020,111,81,"personsCount"],[1,2023,111,97],[1,2027,112,6,"triggerPrompt"],[1,2029,112,20],[1,2043,172,8,"setPersonsCount"],[1,2059,116,27,"count"],[1,2063,117,4,"setPersonsCountState"],[1,2065,117,25,"count"],[1,2068,120,18],[1,2073,120,8,"count"],[1,2076,121,6,"triggerPrompt"],[1,2078,121,20],[1,2092,173,8,"dismissPrompt"],[1,2106,141,24,"async"],[1,2116,142,4,"setShouldShowPremiumPrompt"],[1,2119,142,31],[1,2122,143,4,"setPromptType"],[1,2124,143,18],[1,2130,145,9,"hasSeenWelcomeOffer"],[1,2134,146,6,"setHasSeenWelcomeOffer"],[1,2137,146,29],[1,2146,147,12,"AsyncStorage"],[1,2148,147,24,"default"],[1,2156,147,25,"setItem"],[1,2164,147,33,"STORAGE_KEYS"],[1,2166,147,46,"WELCOME_SEEN"],[1,2179,147,60],[1,2189,174,8,"hasSeenWelcomeOffer"],[1,2211,175,8,"welcomeOfferExpiry"],[1,2232,176,8,"isWelcomeOfferValid"],[1,2254,177,8,"referralCode"],[1,2269,178,8,"generateReferralCode"],[1,2290,151,31,"generateReferralCode"],[1,2295,152,4],[1,2298,152,8,"referralCode"],[1,2300,152,22],[1,2307,152,29,"referralCode"],[1,2309,155,4],[1,2315,155,10,"code"],[1,2317,155,17],[1,2324,155,24,"Math"],[1,2329,155,29,"random"],[1,2338,155,38,"toString"],[1,2347,155,47],[1,2351,155,51,"substring"],[1,2361,155,61],[1,2363,155,64],[1,2366,155,67,"toUpperCase"],[1,2382,158,4],[1,2389,156,4,"setReferralCode"],[1,2391,156,20,"code"],[1,2394,157,4,"AsyncStorage"],[1,2396,157,16,"default"],[1,2404,157,17,"setItem"],[1,2412,157,25,"STORAGE_KEYS"],[1,2414,157,38,"REFERRAL_CODE"],[1,2428,157,53,"code"],[1,2431,158,11,"code"],[1,2435,179,8,"children"],[1,2444,181,7,"children"],[1,2452,181,15],[1,2458,181,15,"fileName"],[1,2467],[1,2517,181,15,"lineNumber"],[1,2528,181,15],[1,2532,181,15,"columnNumber"],[1,2545,181,15],[1,2548,181,15,"this"],[1,2553,184,0],[1,2554,186,7],[1,2563,186,16,"useConversion"],[1,2567,186,32,"_s2"],[1,2571,187,2],[1,2577,187,8,"context"],[1,2580,187,18],[1,2582,187,18,"useContext"],[1,2584,187,28,"useContext"],[1,2596,187,29,"ConversionContext"],[1,2599,188,2],[1,2607,188,18,"undefined"],[1,2611,188,6,"context"],[1,2613,189,4],[1,2619,189,10],[1,2623,189,14,"Error"],[1,2629,189,20],[1,2687,191,2],[1,2694,191,9,"context"],[1,2695,192,0],[1,2696,186,29],[1,2700,186,29,"_c"],[1,2702,184,1,"_s"],[1,2704,42,16,"ConversionProvider"],[1,2706,42,34],[1,2758,43,19,"useAuth"],[1,2760,43,26,"useAuth"],[1,2768,43,26],[1,2771,43,26,"_c"],[1,2773,42,16,"ConversionProvider"],[1,2775,192,1,"_s2"],[1,2777,186,16,"useConversion"],[1,2779,186,29],[1,2811,186,29,"$RefreshReg$"],[1,2824,186,29,"_c"],[1,2826,186,29],[1,2850]],"functionMap":{"names":["<global>","ConversionProvider","useEffect$argument_0","loadSavedData","showWelcomeOffer","trackAction","setPersonsCount","triggerPrompt","dismissPrompt","generateReferralCode","useConversion"],"mappings":"AAA;OCyC;YCa;GDE;wBEE;GFuB;2BGE;GHU;sBIE;GJkB;0BKE;GLO;wBME;GNc;wBOE;GPQ;+BQE;GRQ;CDyB;OUE;CVM"},"hasCjsExports":false},"type":"js/module"}]}