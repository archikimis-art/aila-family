{"dependencies":[{"name":"@babel/runtime/helpers/objectSpread2","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":225},"end":{"line":13,"column":65,"index":290}}],"key":"SfRhzMj3Ex6qA89WTFEUm9Lj49A=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createForOfIteratorHelperLoose","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":291},"end":{"line":14,"column":100,"index":391}}],"key":"Y/2Rvrgl4aDxeJKdk1U58Vc2xw8=","exportNames":["*"],"imports":1}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0,"index":392},"end":{"line":15,"column":43,"index":435}}],"key":"bGUa+dDG2WEhPiIlobT3urS95UE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){'use strict';function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return u}});var t=e(r(d[0],\"@babel/runtime/helpers/objectSpread2\")),n=e(r(d[1],\"@babel/runtime/helpers/createForOfIteratorHelperLoose\")),s=e(r(d[2],\"fbjs/lib/invariant\"));function l(e,t,n,s,l,u){if(h(n,s,l))return!0;var c=o(n,s,l);return 100*(e?c/l:c/u)>=t}function o(e,t,n){var s=Math.min(t,n)-Math.max(e,0);return Math.max(0,s)}function h(e,t,n){return e>=0&&t<=n&&t>e}var u=class{constructor(e){void 0===e&&(e={viewAreaCoveragePercentThreshold:0}),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=e}dispose(){this._timers.forEach(clearTimeout)}computeViewableItems(e,t,n,o,h){var u=e.getItemCount(e.data),c=this._config,f=c.itemVisiblePercentThreshold,v=c.viewAreaCoveragePercentThreshold,_=null!=v,b=_?v:f;(0,s.default)(null!=b&&null!=f!=(null!=v),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var w=[];if(0===u)return w;var I=-1,p=h||{first:0,last:u-1},y=p.first,T=p.last;if(T>=u)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:h,itemCount:u})),[];for(var M=y;M<=T;M++){var V=o(M,e);if(V){var C=V.offset-t,P=C+V.length;if(C<n&&P>0)I=M,l(_,b,C,P,n,V.length)&&w.push(M);else if(I>=0)break}}return w}onUpdate(e,t,n,s,l,o,h){var u=e.getItemCount(e.data);if((!this._config.waitForInteraction||this._hasInteracted)&&0!==u&&s(0,e)){var c=[];if(u&&(c=this.computeViewableItems(e,t,n,s,h)),this._viewableIndices.length!==c.length||!this._viewableIndices.every((e,t)=>e===c[t]))if(this._viewableIndices=c,this._config.minimumViewTime){var f=setTimeout(()=>{this._timers.delete(f),this._onUpdateSync(e,c,o,l)},this._config.minimumViewTime);this._timers.add(f)}else this._onUpdateSync(e,c,o,l)}}resetViewableIndices(){this._viewableIndices=[]}recordInteraction(){this._hasInteracted=!0}_onUpdateSync(e,s,l,o){s=s.filter(e=>this._viewableIndices.includes(e));for(var h,u=this._viewableItems,c=new Map(s.map(t=>{var n=o(t,!0,e);return[n.key,n]})),f=[],v=(0,n.default)(c);!(h=v()).done;){var _=h.value,b=_[0],w=_[1];u.has(b)||f.push(w)}for(var I,p=(0,n.default)(u);!(I=p()).done;){var y=I.value,T=y[0],M=y[1];c.has(T)||f.push((0,t.default)((0,t.default)({},M),{},{isViewable:!1}))}f.length>0&&(this._viewableItems=c,l({viewableItems:Array.from(c.values()),changed:f,viewabilityConfig:this._config}))}}});","lineCount":1,"map":[[1,29,11,0],[1,42,11,13],[1,51,11,13,"_interopDefault"],[1,53,11,13,"e"],[1,56,11,13],[1,63,11,13,"e"],[1,68,11,13,"__esModule"],[1,79,11,13,"e"],[1,81,11,13],[1,82,11,13,"default"],[1,90,11,13,"e"],[1,92,11,13],[1,93,11,13,"Object"],[1,100,11,13,"defineProperty"],[1,115,11,13,"_e"],[1,118,11,13],[1,132,11,13,"value"],[1,139,11,13],[1,143,206,0,"Object"],[1,150,206,0,"defineProperty"],[1,165,206,0,"_e"],[1,168,206,0],[1,179,206,0,"enumerable"],[1,191,206,0],[1,193,206,0,"get"],[1,197,206,0],[1,215,206,0,"_default"],[1,216,206,0],[1,220,13,0],[1,224,13,0,"_objectSpread"],[1,226,13,0,"_interopDefault"],[1,228,13,0,"r"],[1,230,13,0,"d"],[1,232,13,0],[1,276,14,0,"_createForOfIteratorHelperLoose"],[1,278,14,0,"_interopDefault"],[1,280,14,0,"r"],[1,282,14,0,"d"],[1,284,14,0],[1,345,15,0,"invariant"],[1,347,15,0,"_interopDefault"],[1,349,15,0,"r"],[1,351,15,0,"d"],[1,353,15,0],[1,379,190,0],[1,388,190,9,"_isViewable"],[1,390,190,21,"viewAreaMode"],[1,392,190,35,"viewablePercentThreshold"],[1,394,190,61,"top"],[1,396,190,66,"bottom"],[1,398,190,74,"viewportHeight"],[1,400,190,90,"itemLength"],[1,403,191,2],[1,406,191,6,"_isEntirelyVisible"],[1,408,191,25,"top"],[1,410,191,30,"bottom"],[1,412,191,38,"viewportHeight"],[1,415,192,4],[1,422,192,11],[1,424,194,4],[1,428,194,8,"pixels"],[1,430,194,17,"_getPixelsVisible"],[1,432,194,35,"top"],[1,434,194,40,"bottom"],[1,436,194,48,"viewportHeight"],[1,439,196,4],[1,446,195,18],[1,451,195,25,"viewAreaMode"],[1,453,195,40,"pixels"],[1,455,195,49,"viewportHeight"],[1,457,195,66,"pixels"],[1,459,195,75,"itemLength"],[1,463,196,22,"viewablePercentThreshold"],[1,464,198,0],[1,465,199,0],[1,474,199,9,"_getPixelsVisible"],[1,476,199,27,"top"],[1,478,199,32,"bottom"],[1,480,199,40,"viewportHeight"],[1,483,200,2],[1,487,200,6,"visibleHeight"],[1,489,200,22,"Math"],[1,494,200,27,"min"],[1,498,200,31,"bottom"],[1,500,200,39,"viewportHeight"],[1,503,200,57,"Math"],[1,508,200,62,"max"],[1,512,200,66,"top"],[1,514,200,71],[1,517,201,2],[1,524,201,9,"Math"],[1,529,201,14,"max"],[1,533,201,18],[1,535,201,21,"visibleHeight"],[1,537,202,0],[1,538,203,0],[1,547,203,9,"_isEntirelyVisible"],[1,549,203,28,"top"],[1,551,203,33,"bottom"],[1,553,203,41,"viewportHeight"],[1,556,204,2],[1,563,204,9,"top"],[1,566,204,16],[1,569,204,21,"bottom"],[1,572,204,31,"viewportHeight"],[1,575,204,49,"bottom"],[1,577,204,58,"top"],[1,578,205,0],[1,579,206,0],[1,583,206,0,"_default"],[1,585,28,0],[1,591,29,2,"constructor"],[1,603,29,14,"config"],[1,611,30,19],[1,615,30,8,"config"],[1,619,31,6,"config"],[1,621,31,15],[1,622,32,8,"viewAreaCoveragePercentThreshold"],[1,655,32,42],[1,659,35,4,"this"],[1,664,35,9,"_hasInteracted"],[1,680,35,26],[1,682,36,4,"this"],[1,687,36,9,"_timers"],[1,695,36,19],[1,699,36,23,"Set"],[1,703,37,4,"this"],[1,708,37,9,"_viewableIndices"],[1,725,37,28],[1,728,38,4,"this"],[1,733,38,9,"_viewableItems"],[1,748,38,26],[1,752,38,30,"Map"],[1,756,39,4,"this"],[1,761,39,9,"_config"],[1,769,39,19,"config"],[1,770,40,2],[1,771,45,2,"dispose"],[1,781,49,4,"this"],[1,786,49,9,"_timers"],[1,794,49,17,"forEach"],[1,802,49,25,"clearTimeout"],[1,815,50,2],[1,816,55,2,"computeViewableItems"],[1,837,55,23,"props"],[1,839,55,30,"scrollOffset"],[1,841,55,44,"viewportHeight"],[1,843,55,60,"getFrameMetrics"],[1,845,57,2,"renderRange"],[1,848,58,4],[1,852,58,8,"itemCount"],[1,854,58,20,"props"],[1,856,58,26,"getItemCount"],[1,869,58,39,"props"],[1,871,58,45,"data"],[1,877,59,8,"_this$_config"],[1,879,59,24,"this"],[1,884,59,29,"_config"],[1,892,60,6,"itemVisiblePercentThreshold"],[1,894,60,36,"_this$_config"],[1,896,60,50,"itemVisiblePercentThreshold"],[1,924,61,6,"viewAreaCoveragePercentThreshold"],[1,926,61,41,"_this$_config"],[1,928,61,55,"viewAreaCoveragePercentThreshold"],[1,961,62,8,"viewAreaMode"],[1,963,62,59],[1,969,62,23,"viewAreaCoveragePercentThreshold"],[1,971,63,8,"viewablePercentThreshold"],[1,973,63,35,"viewAreaMode"],[1,975,63,50,"viewAreaCoveragePercentThreshold"],[1,977,63,85,"itemVisiblePercentThreshold"],[1,980,64,4],[1,982,64,4,"invariant"],[1,984,64,13,"default"],[1,993,64,42],[1,999,64,14,"viewablePercentThreshold"],[1,1002,64,81],[1,1008,64,50,"itemVisiblePercentThreshold"],[1,1012,64,127],[1,1018,64,91,"viewAreaCoveragePercentThreshold"],[1,1021,64,134],[1,1112,65,4],[1,1116,65,8,"viewableIndices"],[1,1118,65,26],[1,1121,66,4],[1,1124,66,22],[1,1128,66,8,"itemCount"],[1,1130,67,6],[1,1137,67,13,"viewableIndices"],[1,1139,69,4],[1,1143,69,8,"firstVisible"],[1,1146,69,24],[1,1148,70,8,"_ref"],[1,1150,70,15,"renderRange"],[1,1153,70,30],[1,1154,71,8,"first"],[1,1160,71,15],[1,1162,72,8,"last"],[1,1167,72,14,"itemCount"],[1,1169,72,26],[1,1172,74,6,"first"],[1,1174,74,14,"_ref"],[1,1176,74,19,"first"],[1,1182,75,6,"last"],[1,1184,75,13,"_ref"],[1,1186,75,18,"last"],[1,1191,76,4],[1,1194,76,8,"last"],[1,1197,76,16,"itemCount"],[1,1199,81,6],[1,1206,77,6,"console"],[1,1214,77,14,"warn"],[1,1219,77,19],[1,1265,77,67,"JSON"],[1,1270,77,72,"stringify"],[1,1280,77,82],[1,1281,78,8,"renderRange"],[1,1295,79,8,"itemCount"],[1,1310,81,13],[1,1313,83,4],[1,1317,83,9],[1,1321,83,13,"idx"],[1,1323,83,19,"first"],[1,1325,83,26,"idx"],[1,1328,83,33,"last"],[1,1330,83,39,"idx"],[1,1334,83,46],[1,1335,84,6],[1,1339,84,10,"metrics"],[1,1341,84,20,"getFrameMetrics"],[1,1343,84,36,"idx"],[1,1345,84,41,"props"],[1,1348,85,6],[1,1351,85,11,"metrics"],[1,1353,85,6],[1,1354,88,6],[1,1358,88,10,"top"],[1,1360,88,16,"metrics"],[1,1362,88,24,"offset"],[1,1369,88,33,"scrollOffset"],[1,1371,89,10,"bottom"],[1,1373,89,19,"top"],[1,1375,89,25,"metrics"],[1,1377,89,33,"length"],[1,1384,90,6],[1,1387,90,10,"top"],[1,1389,90,16,"viewportHeight"],[1,1392,90,34,"bottom"],[1,1394,90,43],[1,1396,91,8,"firstVisible"],[1,1398,91,23,"idx"],[1,1400,92,12,"_isViewable"],[1,1402,92,24,"viewAreaMode"],[1,1404,92,38,"viewablePercentThreshold"],[1,1406,92,64,"top"],[1,1408,92,69,"bottom"],[1,1410,92,77,"viewportHeight"],[1,1412,92,93,"metrics"],[1,1414,92,101,"length"],[1,1423,93,10,"viewableIndices"],[1,1425,93,26,"push"],[1,1430,93,31,"idx"],[1,1438,95,13],[1,1441,95,17,"firstVisible"],[1,1444,95,33],[1,1446,96,8],[1,1451,87,6],[1,1452,98,4],[1,1453,99,4],[1,1460,99,11,"viewableIndices"],[1,1461,100,2],[1,1462,106,2,"onUpdate"],[1,1471,106,11,"props"],[1,1473,106,18,"scrollOffset"],[1,1475,106,32,"viewportHeight"],[1,1477,106,48,"getFrameMetrics"],[1,1479,106,65,"createViewToken"],[1,1481,106,82,"onViewableItemsChanged"],[1,1483,108,2,"renderRange"],[1,1486,109,4],[1,1490,109,8,"itemCount"],[1,1492,109,20,"props"],[1,1494,109,26,"getItemCount"],[1,1507,109,39,"props"],[1,1509,109,45,"data"],[1,1515,110,4],[1,1520,110,8,"this"],[1,1525,110,13,"_config"],[1,1533,110,21,"waitForInteraction"],[1,1553,110,44,"this"],[1,1558,110,49,"_hasInteracted"],[1,1575,110,81],[1,1579,110,67,"itemCount"],[1,1582,110,87,"getFrameMetrics"],[1,1584,110,103],[1,1586,110,106,"props"],[1,1589,110,4],[1,1590,113,4],[1,1594,113,8,"viewableIndices"],[1,1596,113,26],[1,1599,117,4],[1,1602,114,8,"itemCount"],[1,1606,115,6,"viewableIndices"],[1,1608,115,24,"this"],[1,1613,115,29,"computeViewableItems"],[1,1634,115,50,"props"],[1,1636,115,57,"scrollOffset"],[1,1638,115,71,"viewportHeight"],[1,1640,115,87,"getFrameMetrics"],[1,1642,115,104,"renderRange"],[1,1646,117,8,"this"],[1,1651,117,13,"_viewableIndices"],[1,1668,117,30,"length"],[1,1677,117,41,"viewableIndices"],[1,1679,117,57,"length"],[1,1688,117,67,"this"],[1,1693,117,72,"_viewableIndices"],[1,1710,117,89,"every"],[1,1716,117,95],[1,1717,117,96,"v"],[1,1719,117,99,"ii"],[1,1723,117,106,"v"],[1,1727,117,112,"viewableIndices"],[1,1729,117,128,"ii"],[1,1733,123,4],[1,1736,122,4,"this"],[1,1741,122,9,"_viewableIndices"],[1,1758,122,28,"viewableIndices"],[1,1760,123,8,"this"],[1,1765,123,13,"_config"],[1,1773,123,21,"minimumViewTime"],[1,1789,123,38],[1,1790,124,6],[1,1794,124,10,"handle"],[1,1796,124,19,"setTimeout"],[1,1807,124,30],[1,1812,128,8,"this"],[1,1817,128,13,"_timers"],[1,1825,128,21,"delete"],[1,1832,128,28,"handle"],[1,1835,129,8,"this"],[1,1840,129,13,"_onUpdateSync"],[1,1854,129,27,"props"],[1,1856,129,34,"viewableIndices"],[1,1858,129,51,"onViewableItemsChanged"],[1,1860,129,75,"createViewToken"],[1,1864,130,9,"this"],[1,1869,130,14,"_config"],[1,1877,130,22,"minimumViewTime"],[1,1894,134,6,"this"],[1,1899,134,11,"_timers"],[1,1907,134,19,"add"],[1,1911,134,23,"handle"],[1,1913,135,4],[1,1919,136,6,"this"],[1,1924,136,11,"_onUpdateSync"],[1,1938,136,25,"props"],[1,1940,136,32,"viewableIndices"],[1,1942,136,49,"onViewableItemsChanged"],[1,1944,136,73,"createViewToken"],[1,1946,112,4],[1,1947,138,2],[1,1948,143,2,"resetViewableIndices"],[1,1971,144,4,"this"],[1,1976,144,9,"_viewableIndices"],[1,1993,144,28],[1,1995,145,2],[1,1996,150,2,"recordInteraction"],[1,2016,151,4,"this"],[1,2021,151,9,"_hasInteracted"],[1,2037,151,26],[1,2038,152,2],[1,2039,153,2,"_onUpdateSync"],[1,2053,153,16,"props"],[1,2055,153,23,"viewableIndicesToCheck"],[1,2057,153,47,"onViewableItemsChanged"],[1,2059,153,71,"createViewToken"],[1,2062,155,4,"viewableIndicesToCheck"],[1,2064,155,29,"viewableIndicesToCheck"],[1,2066,155,52,"filter"],[1,2073,155,59,"ii"],[1,2076,155,65,"this"],[1,2081,155,70,"_viewableIndices"],[1,2098,155,87,"includes"],[1,2107,155,96,"ii"],[1,2111,162,4],[1,2115,156,4],[1,2119,162,69,"_step"],[1,2121,156,8,"prevItems"],[1,2123,156,20,"this"],[1,2128,156,25,"_viewableItems"],[1,2143,157,8,"nextItems"],[1,2145,157,20],[1,2149,157,24,"Map"],[1,2153,157,28,"viewableIndicesToCheck"],[1,2155,157,51,"map"],[1,2159,157,55,"ii"],[1,2163,158,6],[1,2167,158,10,"viewable"],[1,2169,158,21,"createViewToken"],[1,2171,158,37,"ii"],[1,2174,158,41],[1,2176,158,47,"props"],[1,2179,159,6],[1,2185,159,13],[1,2186,159,14,"viewable"],[1,2188,159,23,"key"],[1,2192,159,28,"viewable"],[1,2198,161,8,"changed"],[1,2200,161,18],[1,2203,162,13,"_iterator"],[1,2206,162,25],[1,2208,162,25,"_createForOfIteratorHelperLoose"],[1,2210,162,56,"default"],[1,2219,162,57,"nextItems"],[1,2224,162,78,"_step"],[1,2226,162,86,"_iterator"],[1,2231,162,99,"done"],[1,2237,162,106],[1,2238,163,6],[1,2242,163,10,"_step$value"],[1,2244,163,24,"_step"],[1,2246,163,30,"value"],[1,2252,164,8,"key"],[1,2254,164,14,"_step$value"],[1,2256,164,26],[1,2259,165,8,"viewable"],[1,2261,165,19,"_step$value"],[1,2263,165,31],[1,2266,166,11,"prevItems"],[1,2268,166,21,"has"],[1,2272,166,25,"key"],[1,2276,167,8,"changed"],[1,2278,167,16,"push"],[1,2283,167,21,"viewable"],[1,2285,169,4],[1,2286,170,4],[1,2290,170,9],[1,2294,170,70,"_step2"],[1,2296,170,13,"_iterator2"],[1,2299,170,26],[1,2301,170,26,"_createForOfIteratorHelperLoose"],[1,2303,170,57,"default"],[1,2312,170,58,"prevItems"],[1,2317,170,80,"_step2"],[1,2319,170,89,"_iterator2"],[1,2324,170,103,"done"],[1,2330,170,110],[1,2331,171,6],[1,2335,171,10,"_step2$value"],[1,2337,171,25,"_step2"],[1,2339,171,32,"value"],[1,2345,172,8,"_key"],[1,2347,172,15,"_step2$value"],[1,2349,172,28],[1,2352,173,8,"_viewable"],[1,2354,173,20,"_step2$value"],[1,2356,173,33],[1,2359,174,11,"nextItems"],[1,2361,174,21,"has"],[1,2365,174,25,"_key"],[1,2369,175,8,"changed"],[1,2371,175,16,"push"],[1,2377,175,21],[1,2379,175,21,"_objectSpread"],[1,2381,175,34,"default"],[1,2391,175,35],[1,2393,175,35,"_objectSpread"],[1,2395,175,48,"default"],[1,2404,175,49],[1,2405,175,50],[1,2407,175,53,"_viewable"],[1,2410,175,65],[1,2411,175,66],[1,2413,175,69],[1,2414,176,10,"isViewable"],[1,2426,176,22],[1,2430,179,4],[1,2431,180,8,"changed"],[1,2433,180,16,"length"],[1,2440,180,25],[1,2444,181,6,"this"],[1,2449,181,11,"_viewableItems"],[1,2464,181,28,"nextItems"],[1,2466,182,6,"onViewableItemsChanged"],[1,2468,182,29],[1,2469,183,8,"viewableItems"],[1,2483,183,23,"Array"],[1,2489,183,29,"from"],[1,2494,183,34,"nextItems"],[1,2496,183,44,"values"],[1,2506,184,8,"changed"],[1,2516,185,8,"viewabilityConfig"],[1,2534,185,27,"this"],[1,2539,185,32,"_config"],[1,2549,188,2],[1,2551,206,33],[1,2554]],"functionMap":{"names":["<global>","ViewabilityHelper","ViewabilityHelper#constructor","ViewabilityHelper#dispose","ViewabilityHelper#computeViewableItems","ViewabilityHelper#onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","ViewabilityHelper#resetViewableIndices","ViewabilityHelper#recordInteraction","ViewabilityHelper#_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;AC2B;ECC;GDW;EEK;GFK;EGK;GH6C;EIM;+FCW,oCD;8BEO;OFM;GJQ;EOK;GPE;EQK;GRE;ESC;2DCE,wCD;uDEE;KFG;GT4B;CDC;AaC;CbQ;AcC;CdG;AeC;CfE"},"hasCjsExports":false},"type":"js/module"}]}