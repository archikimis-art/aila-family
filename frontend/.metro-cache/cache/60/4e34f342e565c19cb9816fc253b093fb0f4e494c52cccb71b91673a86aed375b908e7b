{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":34,"index":194}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var api = _interopDefault(_servicesApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('auth_token');\n        if (token) {\n          api.default.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n          const response = await api.default.get('/auth/me');\n          setUser(response.data);\n        }\n      } catch (error) {\n        await AsyncStorage.default.removeItem('auth_token');\n        delete api.default.defaults.headers.common['Authorization'];\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await api.default.post('/auth/login', {\n        email,\n        password\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      api.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      setUser(userData);\n    };\n    const register = async data => {\n      const response = await api.default.post('/auth/register', data);\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      api.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      setUser(userData);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      delete api.default.defaults.headers.common['Authorization'];\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await api.default.get('/auth/me');\n        setUser(response.data);\n      } catch (error) {\n        await logout();\n      }\n    };\n    const isAdmin = () => {\n      return user?.role === 'admin';\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        refreshUser,\n        isAdmin\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":118,"map":[[13,2,36,0,"Object"],[13,8,36,0],[13,9,36,0,"defineProperty"],[13,23,36,0],[13,24,36,0,"exports"],[13,31,36,0],[14,4,36,0,"enumerable"],[14,14,36,0],[15,4,36,0,"get"],[15,7,36,0],[15,18,36,0,"get"],[15,19,36,0],[16,6,36,0],[16,13,36,0,"AuthProvider"],[16,25,36,0],[17,4,36,0],[18,2,36,0],[19,2,104,0,"Object"],[19,8,104,0],[19,9,104,0,"defineProperty"],[19,23,104,0],[19,24,104,0,"exports"],[19,31,104,0],[20,4,104,0,"enumerable"],[20,14,104,0],[21,4,104,0,"get"],[21,7,104,0],[21,18,104,0,"get"],[21,19,104,0],[22,6,104,0],[22,13,104,0,"useAuth"],[22,20,104,0],[23,4,104,0],[24,2,104,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_servicesApi"],[28,18,3,0],[28,21,3,0,"require"],[28,28,3,0],[28,29,3,0,"_dependencyMap"],[28,43,3,0],[29,2,3,0],[29,6,3,0,"api"],[29,9,3,0],[29,12,3,0,"_interopDefault"],[29,27,3,0],[29,28,3,0,"_servicesApi"],[29,40,3,0],[30,2,3,34],[30,6,3,34,"_reactJsxDevRuntime"],[30,25,3,34],[30,28,3,34,"require"],[30,35,3,34],[30,36,3,34,"_dependencyMap"],[30,50,3,34],[31,2,34,0],[31,8,34,6,"AuthContext"],[31,19,34,17],[31,35,34,20],[31,39,34,20,"createContext"],[31,45,34,33],[31,46,34,33,"createContext"],[31,59,34,33],[31,61,34,63,"undefined"],[31,70,34,72],[31,71,34,73],[32,2,36,7],[32,8,36,13,"AuthProvider"],[32,20,36,60],[32,23,36,63,"AuthProvider"],[32,24,36,64],[33,4,36,66,"children"],[34,2,36,75],[34,3,36,76],[34,8,36,81],[35,4,37,2],[35,10,37,8],[35,11,37,9,"user"],[35,15,37,13],[35,17,37,15,"setUser"],[35,24,37,22],[35,25,37,23],[35,28,37,26],[35,32,37,26,"useState"],[35,38,37,34],[35,39,37,34,"useState"],[35,47,37,34],[35,49,37,48],[35,53,37,52],[35,54,37,53],[36,4,38,2],[36,10,38,8],[36,11,38,9,"loading"],[36,18,38,16],[36,20,38,18,"setLoading"],[36,30,38,28],[36,31,38,29],[36,34,38,32],[36,38,38,32,"useState"],[36,44,38,40],[36,45,38,40,"useState"],[36,53,38,40],[36,55,38,41],[36,59,38,45],[36,60,38,46],[37,4,40,2],[37,8,40,2,"useEffect"],[37,14,40,11],[37,15,40,11,"useEffect"],[37,24,40,11],[37,26,40,12],[37,32,40,18],[38,6,41,4,"checkAuth"],[38,15,41,13],[38,16,41,14],[38,17,41,15],[39,4,42,2],[39,5,42,3],[39,7,42,5],[39,9,42,7],[39,10,42,8],[40,4,44,2],[40,10,44,8,"checkAuth"],[40,19,44,17],[40,22,44,20],[40,28,44,20,"checkAuth"],[40,29,44,20],[40,34,44,32],[41,6,45,4],[41,10,45,8],[42,8,46,6],[42,14,46,12,"token"],[42,19,46,17],[42,22,46,20],[42,28,46,26,"AsyncStorage"],[42,40,46,38],[42,41,46,38,"default"],[42,48,46,38],[42,49,46,39,"getItem"],[42,56,46,46],[42,57,46,47],[42,69,46,59],[42,70,46,60],[43,8,47,6],[43,12,47,10,"token"],[43,17,47,15],[43,19,47,17],[44,10,48,8,"api"],[44,13,48,11],[44,14,48,11,"default"],[44,21,48,11],[44,22,48,12,"defaults"],[44,30,48,20],[44,31,48,21,"headers"],[44,38,48,28],[44,39,48,29,"common"],[44,45,48,35],[44,46,48,36],[44,61,48,51],[44,62,48,52],[44,65,48,55],[44,75,48,65,"token"],[44,80,48,70],[44,82,48,72],[45,10,49,8],[45,16,49,14,"response"],[45,24,49,22],[45,27,49,25],[45,33,49,31,"api"],[45,36,49,34],[45,37,49,34,"default"],[45,44,49,34],[45,45,49,35,"get"],[45,48,49,38],[45,49,49,39],[45,59,49,49],[45,60,49,50],[46,10,50,8,"setUser"],[46,17,50,15],[46,18,50,16,"response"],[46,26,50,24],[46,27,50,25,"data"],[46,31,50,29],[46,32,50,30],[47,8,51,6],[48,6,52,4],[48,7,52,5],[48,8,52,6],[48,15,52,13,"error"],[48,20,52,18],[48,22,52,20],[49,8,53,6],[49,14,53,12,"AsyncStorage"],[49,26,53,24],[49,27,53,24,"default"],[49,34,53,24],[49,35,53,25,"removeItem"],[49,45,53,35],[49,46,53,36],[49,58,53,48],[49,59,53,49],[50,8,54,6],[50,15,54,13,"api"],[50,18,54,16],[50,19,54,16,"default"],[50,26,54,16],[50,27,54,17,"defaults"],[50,35,54,25],[50,36,54,26,"headers"],[50,43,54,33],[50,44,54,34,"common"],[50,50,54,40],[50,51,54,41],[50,66,54,56],[50,67,54,57],[51,6,55,4],[51,7,55,5],[51,16,55,14],[52,8,56,6,"setLoading"],[52,18,56,16],[52,19,56,17],[52,24,56,22],[52,25,56,23],[53,6,57,4],[54,4,58,2],[54,5,58,3],[55,4,60,2],[55,10,60,8,"login"],[55,15,60,13],[55,18,60,16],[55,24,60,16,"login"],[55,25,60,23,"email"],[55,30,60,36],[55,32,60,38,"password"],[55,40,60,54],[55,45,60,59],[56,6,61,4],[56,12,61,10,"response"],[56,20,61,18],[56,23,61,21],[56,29,61,27,"api"],[56,32,61,30],[56,33,61,30,"default"],[56,40,61,30],[56,41,61,31,"post"],[56,45,61,35],[56,46,61,36],[56,59,61,49],[56,61,61,51],[57,8,61,53,"email"],[57,13,61,58],[58,8,61,60,"password"],[59,6,61,69],[59,7,61,70],[59,8,61,71],[60,6,62,4],[60,12,62,10],[61,8,62,12,"access_token"],[61,20,62,24],[62,8,62,26,"user"],[62,12,62,30],[62,14,62,32,"userData"],[63,6,62,41],[63,7,62,42],[63,10,62,45,"response"],[63,18,62,53],[63,19,62,54,"data"],[63,23,62,58],[64,6,64,4],[64,12,64,10,"AsyncStorage"],[64,24,64,22],[64,25,64,22,"default"],[64,32,64,22],[64,33,64,23,"setItem"],[64,40,64,30],[64,41,64,31],[64,53,64,43],[64,55,64,45,"access_token"],[64,67,64,57],[64,68,64,58],[65,6,65,4,"api"],[65,9,65,7],[65,10,65,7,"default"],[65,17,65,7],[65,18,65,8,"defaults"],[65,26,65,16],[65,27,65,17,"headers"],[65,34,65,24],[65,35,65,25,"common"],[65,41,65,31],[65,42,65,32],[65,57,65,47],[65,58,65,48],[65,61,65,51],[65,71,65,61,"access_token"],[65,83,65,73],[65,85,65,75],[66,6,66,4,"setUser"],[66,13,66,11],[66,14,66,12,"userData"],[66,22,66,20],[66,23,66,21],[67,4,67,2],[67,5,67,3],[68,4,69,2],[68,10,69,8,"register"],[68,18,69,16],[68,21,69,19],[68,27,69,26,"data"],[68,31,69,44],[68,35,69,49],[69,6,70,4],[69,12,70,10,"response"],[69,20,70,18],[69,23,70,21],[69,29,70,27,"api"],[69,32,70,30],[69,33,70,30,"default"],[69,40,70,30],[69,41,70,31,"post"],[69,45,70,35],[69,46,70,36],[69,62,70,52],[69,64,70,54,"data"],[69,68,70,58],[69,69,70,59],[70,6,71,4],[70,12,71,10],[71,8,71,12,"access_token"],[71,20,71,24],[72,8,71,26,"user"],[72,12,71,30],[72,14,71,32,"userData"],[73,6,71,41],[73,7,71,42],[73,10,71,45,"response"],[73,18,71,53],[73,19,71,54,"data"],[73,23,71,58],[74,6,73,4],[74,12,73,10,"AsyncStorage"],[74,24,73,22],[74,25,73,22,"default"],[74,32,73,22],[74,33,73,23,"setItem"],[74,40,73,30],[74,41,73,31],[74,53,73,43],[74,55,73,45,"access_token"],[74,67,73,57],[74,68,73,58],[75,6,74,4,"api"],[75,9,74,7],[75,10,74,7,"default"],[75,17,74,7],[75,18,74,8,"defaults"],[75,26,74,16],[75,27,74,17,"headers"],[75,34,74,24],[75,35,74,25,"common"],[75,41,74,31],[75,42,74,32],[75,57,74,47],[75,58,74,48],[75,61,74,51],[75,71,74,61,"access_token"],[75,83,74,73],[75,85,74,75],[76,6,75,4,"setUser"],[76,13,75,11],[76,14,75,12,"userData"],[76,22,75,20],[76,23,75,21],[77,4,76,2],[77,5,76,3],[78,4,78,2],[78,10,78,8,"logout"],[78,16,78,14],[78,19,78,17],[78,25,78,17,"logout"],[78,26,78,17],[78,31,78,29],[79,6,79,4],[79,12,79,10,"AsyncStorage"],[79,24,79,22],[79,25,79,22,"default"],[79,32,79,22],[79,33,79,23,"removeItem"],[79,43,79,33],[79,44,79,34],[79,56,79,46],[79,57,79,47],[80,6,80,4],[80,13,80,11,"api"],[80,16,80,14],[80,17,80,14,"default"],[80,24,80,14],[80,25,80,15,"defaults"],[80,33,80,23],[80,34,80,24,"headers"],[80,41,80,31],[80,42,80,32,"common"],[80,48,80,38],[80,49,80,39],[80,64,80,54],[80,65,80,55],[81,6,81,4,"setUser"],[81,13,81,11],[81,14,81,12],[81,18,81,16],[81,19,81,17],[82,4,82,2],[82,5,82,3],[83,4,84,2],[83,10,84,8,"refreshUser"],[83,21,84,19],[83,24,84,22],[83,30,84,22,"refreshUser"],[83,31,84,22],[83,36,84,34],[84,6,85,4],[84,10,85,8],[85,8,86,6],[85,14,86,12,"response"],[85,22,86,20],[85,25,86,23],[85,31,86,29,"api"],[85,34,86,32],[85,35,86,32,"default"],[85,42,86,32],[85,43,86,33,"get"],[85,46,86,36],[85,47,86,37],[85,57,86,47],[85,58,86,48],[86,8,87,6,"setUser"],[86,15,87,13],[86,16,87,14,"response"],[86,24,87,22],[86,25,87,23,"data"],[86,29,87,27],[86,30,87,28],[87,6,88,4],[87,7,88,5],[87,8,88,6],[87,15,88,13,"error"],[87,20,88,18],[87,22,88,20],[88,8,89,6],[88,14,89,12,"logout"],[88,20,89,18],[88,21,89,19],[88,22,89,20],[89,6,90,4],[90,4,91,2],[90,5,91,3],[91,4,93,2],[91,10,93,8,"isAdmin"],[91,17,93,15],[91,20,93,18,"isAdmin"],[91,21,93,18],[91,26,93,24],[92,6,94,4],[92,13,94,11,"user"],[92,17,94,15],[92,19,94,17,"role"],[92,23,94,21],[92,28,94,26],[92,35,94,33],[93,4,95,2],[93,5,95,3],[94,4,97,2],[94,24,98,4],[94,28,98,4,"_reactJsxDevRuntime"],[94,47,98,4],[94,48,98,4,"jsxDEV"],[94,54,98,4],[94,56,98,5,"AuthContext"],[94,67,98,16],[94,68,98,17,"Provider"],[94,76,98,25],[95,6,98,26,"value"],[95,11,98,31],[95,13,98,33],[96,8,98,35,"user"],[96,12,98,39],[97,8,98,41,"loading"],[97,15,98,48],[98,8,98,50,"login"],[98,13,98,55],[99,8,98,57,"register"],[99,16,98,65],[100,8,98,67,"logout"],[100,14,98,73],[101,8,98,75,"refreshUser"],[101,19,98,86],[102,8,98,88,"isAdmin"],[103,6,98,96],[103,7,98,98],[104,6,98,98,"children"],[104,14,98,98],[104,16,99,7,"children"],[105,4,99,15],[106,6,99,15,"fileName"],[106,14,99,15],[106,16,99,15,"_jsxFileName"],[106,28,99,15],[107,6,99,15,"lineNumber"],[107,16,99,15],[108,6,99,15,"columnNumber"],[108,18,99,15],[109,4,99,15],[109,11,100,26],[109,12,100,27],[110,2,102,0],[110,3,102,1],[111,2,104,7],[111,8,104,13,"useAuth"],[111,15,104,20],[111,18,104,23,"useAuth"],[111,19,104,23],[111,24,104,29],[112,4,105,2],[112,10,105,8,"context"],[112,17,105,15],[112,20,105,18],[112,24,105,18,"useContext"],[112,30,105,28],[112,31,105,28,"useContext"],[112,41,105,28],[112,43,105,29,"AuthContext"],[112,54,105,40],[112,55,105,41],[113,4,106,2],[113,8,106,6,"context"],[113,15,106,13],[113,20,106,18,"undefined"],[113,29,106,27],[113,31,106,29],[114,6,107,4],[114,12,107,10],[114,16,107,14,"Error"],[114,21,107,19],[114,22,107,20],[114,67,107,65],[114,68,107,66],[115,4,108,2],[116,4,109,2],[116,11,109,9,"context"],[116,18,109,16],[117,2,110,0],[117,3,110,1],[118,0,110,2],[118,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","refreshUser","isAdmin","useAuth"],"mappings":"AAA;+DCmC;YCI;GDE;oBEE;GFc;gBGE;GHO;mBIE;GJO;iBKE;GLI;sBME;GNO;kBOE;GPE;CDO;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}